<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>进无止境&#39;s 博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="进无止境's 博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="进无止境's 博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进无止境's 博客">
  
    <link rel="alternate" href="/atom.xml" title="进无止境&#39;s 博客" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  

</head>



  <body>


  
    <header id="header">

  
    <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">
    <script>
        var imgUrls = "https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1492934953851&di=e78549a4d40ae596b6c6c4fc9594ea23&imgtype=0&src=http%3A%2F%2Fpic.58pic.com%2F58pic%2F13%2F49%2F70%2F11i58PICZjp_1024.jpg".split(",");
        var random = Math.floor((Math.random() * imgUrls.length ));
        if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
          document.getElementById("intrologo").style.backgroundImage='url(' + imgUrls[random] + ')';
        } else {
          document.getElementById("intrologo").style.backgroundImage='url(/' + imgUrls[random] + ')';
        }
    </script>
  

    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">进无止境&#39;s 博客</a></h1>
            <h3></h3>
            <h5>Jim</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- 自适应主页背景大图 -->
  
    <script>
        var img = new Image();
        var intrologodiv = document.getElementById("intrologo");
        img.src = intrologodiv.style.backgroundImage.replace('url(','').replace(')','').replace(/\"/gi, "");
        img.onload=function(){
          if (img.width / img.height <= document.body.clientWidth / document.body.clientHeight) {
            intrologodiv.style.backgroundSize = "100% auto";
          } else {
            intrologodiv.style.backgroundSize = "auto 100%";
          }
        };
    </script>
 

 <!-- home_logo_image居中 -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="/">首页</a>
        
          <a id="beautifont" class="main-nav-link" href="/archives">归档</a>
        
          <a id="beautifont" class="main-nav-link" href="/about">关于</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;">
  
    <article id="post-Android智能指针——SP WP"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/05/28/Android智能指针——SP WP/">Android 智能指针——SP WP</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/05/28/Android智能指针——SP WP/" class="article-date">
	  <time datetime="2017-05-28T04:22:33.000Z" itemprop="datePublished">2017-05-28</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="http://blog.163.com/ye_kc_lcx88/blog/static/217863346201462411215858/" target="_blank" rel="external">http://blog.163.com/ye_kc_lcx88/blog/static/217863346201462411215858/</a></p>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/弱指针/">弱指针</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/强指针/">强指针</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/智能指针/">智能指针</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android_Sensor"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
    <div class="article-meta">
      
	<a href="/2017/04/21/Android_Sensor/" class="article-date">
	  <time datetime="2017-04-21T09:39:27.492Z" itemprop="datePublished">2017-04-21</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Android Sensor</p>
<p><a href="http://processors.wiki.ti.com/index.php/Android_Sensor_PortingGuide" target="_blank" rel="external">http://processors.wiki.ti.com/index.php/Android_Sensor_PortingGuide</a></p>

      
    </div>
    <footer class="article-footer">
      
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-linux_select_poll"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/19/linux_select_poll/">Linux select pselect poll epoll用法</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/19/linux_select_poll/" class="article-date">
	  <time datetime="2017-04-18T16:00:00.000Z" itemprop="datePublished">2017-04-19</time>
	</a>

      
    <a class="article-category-link" href="/categories/linux/">linux</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><h3 id="pselect"><a href="#pselect" class="headerlink" title="pselect"></a>pselect</h3><h3 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h3><h3 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h3>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/poll/">poll</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/select/">select</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-linux_inotify"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/19/linux_inotify/">Linux inotify机制</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/19/linux_inotify/" class="article-date">
	  <time datetime="2017-04-18T16:00:00.000Z" itemprop="datePublished">2017-04-19</time>
	</a>

      
    <a class="article-category-link" href="/categories/linux/">linux</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Inotify 是一个 Linux 内核特性，它监控文件系统，并且及时向专门的应用程序发出相关的事件警告，比如删除、读、写和卸载操作等。您还可以跟踪活动的源头和目标等细节。<br>使用 inotify 很简单：创建一个文件描述符fd，附加一个或多个监视器（一个监视器 是一个路径和一组事件，对应一个描述符wd），然后使用 read() 方法从描述符fd获取事件信息。</p>
<p>inotify，linux内核版本 &gt;= 2.6.13</p>
<h3 id="inotify-C-API"><a href="#inotify-C-API" class="headerlink" title="inotify C API"></a>inotify C API</h3><p>Inotify 提供几个系统调用，它们可以构建各种各样的文件系统监控器：</p>
<h5 id="1-fd-inotify-init-fd-inotify-init1-int-flags"><a href="#1-fd-inotify-init-fd-inotify-init1-int-flags" class="headerlink" title="1. fd = inotify_init();  / fd = inotify_init1(int flags);"></a>1. fd = inotify_init();  / fd = inotify_init1(int flags);</h5><pre><code>在内核中创建 inotify 子系统的一个实例instance，成功的话将返回一个文件描述符fd，失败则返回 -1。
就像其他系统调用一样，如果 inotify_init() 失败，请检查 errno 以获得诊断信息。
</code></pre><h5 id="2-wd-inotify-add-watch-int-fd-const-char-pathname-uint32-t-mask"><a href="#2-wd-inotify-add-watch-int-fd-const-char-pathname-uint32-t-mask" class="headerlink" title="2. wd = inotify_add_watch(int fd, const char *pathname, uint32_t mask);"></a>2. wd = inotify_add_watch(int fd, const char *pathname, uint32_t mask);</h5><pre><code>用于添加监视器。每个监视器必须提供一个路径名和相关事件的列表（每个事件由一个常量指定，比如 IN_MODIFY）。
要监控多个事件，只需在事件之间使用逻辑操作符或&apos;|&apos;。
如果 inotify_add_watch() 成功，该调用会为已注册的监视器返回一个惟一的标识符wd; 否则，返回 -1。
使用这个标识符更改或删除监视器。
</code></pre><h5 id="3-inotify-rm-watch-int-fd-int-wd"><a href="#3-inotify-rm-watch-int-fd-int-wd" class="headerlink" title="3. inotify_rm_watch(int fd, int wd);"></a>3. inotify_rm_watch(int fd, int wd);</h5><pre><code>删除一个inotify实例中的监视器wd。 success return 0 ； error return -1。
删除操作将触发IN_IGNORED 事件给该wd
</code></pre><h5 id="4-读事件、关闭监视器、关闭inotify实例"><a href="#4-读事件、关闭监视器、关闭inotify实例" class="headerlink" title="4. 读事件、关闭监视器、关闭inotify实例"></a>4. 读事件、关闭监视器、关闭inotify实例</h5><pre><code>创建完inotify实例及添加监视器后，读inotify实例描述符fd，可以得到监控到的事件。
可以使用select pselect poll epoll 等避免阻塞

文件描述符上的由 inotify_init() 生成的通用 close() 删除所有活动监视器，并释放与 inotify 实例相关联的所有内存（这里也用到典型的引用计数警告。与实例相关联的所有文件描述符必须在监视器和 inotify 消耗的内存被释放之前关闭）。
</code></pre><h5 id="5-使用技巧-注意事项"><a href="#5-使用技巧-注意事项" class="headerlink" title="5. 使用技巧/注意事项"></a>5. 使用技巧/注意事项</h5><pre><code>如果监视中的文件或目录被删除，它的监视器也会被自动删除（在删除事件发出之后）。
如果在已卸载的文件系统上监控文件或目录，监视器将在删除所有受影响的监视之前收到一个卸载事件。
将 IN_ONESHOT 标志添加到监视器标记中，设置一个一次性警告。警告在发送之后将被删除。
要修改一个事件，必须提供相同的路径名和不同的标记。新监视器将取代老监视器。
考虑到实用性，不可能耗尽任何一个 inotify 实例的监视器。然而，您可能会耗尽事件队列的空间，这取决于处理事件的频率。
    队列溢出会引起 IN_Q_OVERFLOW 事件。
close() 方法毁坏 inotify 实例和所有相关联的监视器，并清空队列中的所有等待事件。
</code></pre><h3 id="inotify-事件结构体及宏（详见inotify-h）"><a href="#inotify-事件结构体及宏（详见inotify-h）" class="headerlink" title="inotify 事件结构体及宏（详见inotify.h）"></a>inotify 事件结构体及宏（详见inotify.h）</h3><h5 id="1-inotify-event-结构体"><a href="#1-inotify-event-结构体" class="headerlink" title="1. inotify_event 结构体"></a>1. inotify_event 结构体</h5><pre><code>struct inotify_event {
   int      wd;       /* Watch descriptor */  属于哪个监视器的事件，说白了就是wd对应的pathname的事件
   uint32_t mask;     /* Mask of events */   //  IN_ACCESS  IN_MODIFY  IN_ATTRIB ... 中一个或多个的位或
   uint32_t cookie;   /* Unique cookie associating related events (for rename(2)) */ 用于关联两个事件
   uint32_t len;      /* Size of name field */  name长度
   char     name[];   /* Optional null-terminated name */  事件关联的文件名，不包括路径
};
</code></pre><p><strong>cookie字段使用场景:</strong> 当把一个文件从一个目录移动到另一个目录时，您可以使用 cookie 将两个事件绑在一起。<br>仅当您监视源和目标目录时，inotify 才生成两个移动事件 — 分别针对源和目标 —，并通过设置 cookie 将它们绑定在一起。<br>要监视一个移动操作，必须指定 IN_MOVED_FROM 或 IN_MOVED_TO，或使用简短的 IN_MOVE，它可以监视两个操作。<br>使用 IN_MOVED_FROM 和 IN_MOVED_TO 来测试事件类型。</p>
<h5 id="2-事件类型-宏（详见inotify-h）"><a href="#2-事件类型-宏（详见inotify-h）" class="headerlink" title="2. 事件类型/宏（详见inotify.h）"></a>2. 事件类型/宏（详见inotify.h）</h5><pre><code>IN_ACCESS         0x00000001 File was accessed (read) (*).
IN_MODIFY         0x00000002 File was modified (*).
IN_ATTRIB         0x00000004 Metadata changed, e.g., permissions, timestamps, extended attributes, 
                             link count (since Linux 2.6.25), UID, GID, etc. (*).
IN_CLOSE_WRITE    0x00000008 File opened for writing was closed (*).
IN_CLOSE_NOWRITE  0x00000010 File not opened for writing was closed (*).
IN_OPEN           0x00000020 File was opened (*).
IN_MOVED_FROM     0x00000040 Generated for the directory containing the old filename when a file is renamed (*).
IN_MOVED_TO       0x00000080 Generated for the directory containing the new filename when a file is renamed (*).
IN_CREATE         0x00000100 File/directory created in watched directory (*).
IN_DELETE         0x00000200 File/directory deleted from watched directory (*).
IN_DELETE_SELF    0x00000400 Watched file/directory was itself deleted.
IN_MOVE_SELF      0x00000800 Watched file/directory was itself moved.

IN_UNMOUNT        0x00002000
IN_Q_OVERFLOW     0x00004000
IN_IGNORED        0x00008000

复合型事件类型
IN_CLOSE      (IN_CLOSE_WRITE | IN_CLOSE_NOWRITE)
IN_MOVE       (IN_MOVED_FROM | IN_MOVED_TO)
IN_ALL_EVENTS (IN_ACCESS | IN_MODIFY | IN_ATTRIB | IN_CLOSE_WRITE |   IN_CLOSE_NOWRITE | IN_OPEN 
              | IN_MOVED_FROM |   IN_MOVED_TO | IN_DELETE | IN_CREATE | IN_DELETE_SELF |   IN_MOVE_SELF)

IN_ONLYDIR        0x01000000
IN_DONT_FOLLOW    0x02000000
IN_MASK_ADD       0x20000000
IN_ISDIR          0x40000000
IN_ONESHOT        0x80000000
</code></pre><h3 id="inotify-程序示例"><a href="#inotify-程序示例" class="headerlink" title="inotify 程序示例"></a>inotify 程序示例</h3><pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;errno.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;sys/inotify.h&gt;

#define EVENT_SIZE  ( sizeof (struct inotify_event) )
#define BUF_LEN     ( 1024 * ( EVENT_SIZE + 16 ) )

int main( int argc, char **argv ) 
{
  int length, i = 0;
  int fd;
  int wd;
  char buffer[BUF_LEN];

  fd = inotify_init();

  if ( fd &lt; 0 ) {
    perror( &quot;inotify_init&quot; );
  }

  wd = inotify_add_watch( fd, &quot;/home/jim/test_inotity&quot;, 
                         IN_MODIFY | IN_CREATE | IN_DELETE );
  length = read( fd, buffer, BUF_LEN );  

  if ( length &lt; 0 ) {
    perror( &quot;read&quot; );
  }  

  while ( i &lt; length ) {
    struct inotify_event *event = ( struct inotify_event * ) &amp;buffer[ i ];
    if ( event-&gt;len ) {
      if ( event-&gt;mask &amp; IN_CREATE ) {
        if ( event-&gt;mask &amp; IN_ISDIR ) {
          printf( &quot;The directory %s was created.\n&quot;, event-&gt;name );       
        }
        else {
          printf( &quot;The file %s was created.\n&quot;, event-&gt;name );
        }
      }
      else if ( event-&gt;mask &amp; IN_DELETE ) {
        if ( event-&gt;mask &amp; IN_ISDIR ) {
          printf( &quot;The directory %s was deleted.\n&quot;, event-&gt;name );       
        }
        else {
          printf( &quot;The file %s was deleted.\n&quot;, event-&gt;name );
        }
      }
      else if ( event-&gt;mask &amp; IN_MODIFY ) {
        if ( event-&gt;mask &amp; IN_ISDIR ) {
          printf( &quot;The directory %s was modified.\n&quot;, event-&gt;name );
        }
        else {
          printf( &quot;The file %s was modified.\n&quot;, event-&gt;name );
        }
      }
    }
    i += EVENT_SIZE + event-&gt;len;
  }

  ( void ) inotify_rm_watch( fd, wd );
  ( void ) close( fd );

  exit( 0 );
}

运行测试
$ ./watcher  &amp; 
$ cd $HOME/test_inotify
$ touch a b c
The file a was created.
The file b was created.
The file c was created.
</code></pre><h3 id="inotify-程序示例2"><a href="#inotify-程序示例2" class="headerlink" title="inotify 程序示例2"></a>inotify 程序示例2</h3><pre><code>#include &lt;stdio.h&gt;
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/inotify.h&gt;

struct wd_path
{
    int wd;
    char *path;
};
char * event_array[] = {
&quot;File was accessed&quot;,
&quot;File was modified&quot;,
&quot;File attributes were changed&quot;,
&quot;writtable file closed&quot;,
&quot;Unwrittable file closed&quot;,
&quot;File was opened&quot;,
&quot;File was moved from X&quot;,
&quot;File was moved to Y&quot;,
&quot;Subfile was created&quot;,
&quot;Subfile was deleted&quot;,
&quot;Self was deleted&quot;,
&quot;Self was moved&quot;,
&quot;&quot;,
&quot;Backing fs was unmounted&quot;,
&quot;Event queued overflowed&quot;,
&quot;File was ignored&quot;
};
#define EVENT_NUM 16

int main(int argc,char *argv[])
{
    int fd,wd,len,tmp_len,i;
    char buffer[1024],*offset,target[1024];
    struct wd_path *wd_array;
    struct inotify_event *event;
    wd_array=(struct wd_path*)malloc((argc-1)*sizeof(struct wd_path));
    fd=inotify_init();
    if(-1==fd) 
    {
        printf(&quot;failed to init inotifyn&quot;);
        return 0;
    }

    printf(&quot;argc = %d \n&quot;, argc);
    if (argc &lt; 2) {
        return -1;
    }

    printf(&quot;argv[0] = %d \n&quot;, argv[0]);
    printf(&quot;argv[1] = %d \n&quot;, argv[1]);

    for(i=0;i&lt;argc-1;i++) 
    {
        wd_array[i].path = argv[i+1];
        wd=inotify_add_watch(fd,wd_array[i].path,IN_ALL_EVENTS); 
        wd_array[i].wd=wd;
    }

    memset(buffer,0,1024);
    while(len=read(fd,buffer,1024))
    {
        offset=buffer;
        event=(struct inotify_event*)buffer;
        while(((char *)event-buffer)&lt;len)
        {
            for(i=0;i&lt;argc-1;i++)
            {
                if(event-&gt;wd==wd_array[i].wd)
                {
                    memset(target,0,1024);
                    strcpy(target,wd_array[i].path);
                    strcat(target,&quot;/&quot;);
                    strcat(target,event-&gt;name);
                    printf(&quot;nnntarget:%s:n&quot;,target); 
                }
            }
            for(i=0;i&lt;EVENT_NUM;i++)
            {
                if(event-&gt;mask&amp;(1&lt;&lt;i))
                    printf(&quot;    event:%sn&quot;,event_array[i]);
            }
            tmp_len=sizeof(struct inotify_event)+event-&gt;len;
            event=(struct inotify_event*)(offset+tmp_len);
            offset+=tmp_len;
        }
    }
    return 1;
}
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/inotify/">inotify</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Markdown使用"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/13/Markdown使用/">Markdown&amp;MarkdownPad编辑器</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/13/Markdown使用/" class="article-date">
	  <time datetime="2017-04-13T11:55:33.000Z" itemprop="datePublished">2017-04-13</time>
	</a>

      
    <a class="article-category-link" href="/categories/杂类/">杂类</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="MarkdownPad编辑器添加表格的扩展"><a href="#MarkdownPad编辑器添加表格的扩展" class="headerlink" title="MarkdownPad编辑器添加表格的扩展"></a>MarkdownPad编辑器添加表格的扩展</h3><p><strong>开启表格特性支持：</strong> <code>工具 ==&gt; 选项 ==&gt; Markdown ==&gt; Markdown处理器 改为 &quot;Markdown(扩展)&quot;or&quot;GitHub风格Markdown&quot;即可。</code></p>
<p><strong>表格语法:</strong></p>
<pre>
    | Tables        | Are           | Cool  |
    | :------------ |:-------------:| -----:|
    | col 3 is      | right-aligned | $1600 |
    | col 2 is      | centered      |   $12 |
    | zebra stripes | are neat      |    $1 |
</pre>

<pre><code>:---- 左对齐,默认左对齐
:---: 居中
----: 右对齐
每列的宽度是根据对应列里最长的文本来决定
</code></pre><h3 id="在设置的过程中要注册markdownpad2"><a href="#在设置的过程中要注册markdownpad2" class="headerlink" title="在设置的过程中要注册markdownpad2"></a>在设置的过程中要注册markdownpad2</h3><pre><code>邮箱：

Soar360@live.com

授权秘钥：

GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2
M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6
Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5C
Cx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr
0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==
</code></pre><h3 id="Markdown编辑器快捷键："><a href="#Markdown编辑器快捷键：" class="headerlink" title="Markdown编辑器快捷键："></a>Markdown编辑器快捷键：</h3><pre><code>· 加粗 Ctrl + B
· 斜体 Ctrl + I
· 引用 Ctrl + Q
· 插入链接 Ctrl + L
· 插入代码 Ctrl + K
· 插入图片 Ctrl + G
· 提升标题 Ctrl + H
· 有序列表 Ctrl + O
· 无序列表 Ctrl + U
· 横线 Ctrl + R
· 撤销 Ctrl + Z
· 重做 Ctrl + Y
</code></pre><h3 id="不解析内容处理方法"><a href="#不解析内容处理方法" class="headerlink" title="不解析内容处理方法"></a>不解析内容处理方法</h3><pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">    代码块 </div><div class="line">    ``` </div><div class="line"></div><div class="line">或者 </div><div class="line"></div><div class="line">    &lt;pre&gt; </div><div class="line">    代码块 </div><div class="line">    &lt;/pre&gt; </div><div class="line"></div><div class="line"></div><div class="line"># Markdown语法参考 #</div><div class="line"></div><div class="line">### 加粗和倾斜</div></pre></td></tr></table></figure>

*emphasize*   **strong**
_emphasize_   __strong__
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### 链接和Email</div><div class="line">链接：</div></pre></td></tr></table></figure>
<p>   An <a href="http://url.com/" title="Title" target="_blank" rel="external">example</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Reference-style labels (titles are optional)：</div></pre></td></tr></table></figure></p>
<p> An [example][id]. Then, anywhere else in the doc,<br> define the link:</p>
<pre><code>[id]: http://example.com/  &quot;Title&quot;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Email：</div></pre></td></tr></table></figure>
<p>  An email <a href="&#x6d;&#97;&#x69;&#x6c;&#x74;&#111;&#58;&#x65;&#120;&#x61;&#109;&#x70;&#108;&#x65;&#64;&#x65;&#120;&#97;&#x6d;&#x70;&#108;&#x65;&#46;&#99;&#x6f;&#109;">&#x65;&#120;&#x61;&#109;&#x70;&#108;&#x65;&#64;&#x65;&#120;&#97;&#x6d;&#x70;&#108;&#x65;&#46;&#99;&#x6f;&#109;</a> link.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### 图片</div><div class="line"></div><div class="line">Inline (titles are optional):</div></pre></td></tr></table></figure></p>
<p>  <img src="/path/img.jpg" alt="alt text" title="Title"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Reference-style:</div></pre></td></tr></table></figure></p>
<pre><code>![alt text][id]

[id]: /url/to/img.jpg &quot;Title&quot;
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### 标题</div><div class="line"></div><div class="line">Setext-style:</div></pre></td></tr></table></figure>
<pre><code>Header 1
========

Header 2
--------
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">atx-style (closing #’s are optional):</div></pre></td></tr></table></figure>
<pre><code># Header 1 #

## Header 2 ##

### Header 3 ###

#### Header 4

##### Header 5

###### Header 6
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">### 列表</div><div class="line">    </div><div class="line">无段落有序列表：</div></pre></td></tr></table></figure>
<pre><code>1. Foo
2. Bar
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">有段落无序列表</div></pre></td></tr></table></figure>
<pre><code>*   A list item.

    With multiple paragraphs.

*   Bar
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> </div><div class="line">嵌套使用列表</div></pre></td></tr></table></figure>
<pre><code>*   Abacus
    * answer
*   Bubbles
    1.  bunk
    2.  bupkis
        * BELITTLER
    3. burper
*   Cunning
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">引用</div></pre></td></tr></table></figure>
<blockquote>
<p>Email-style angle brackets 方括号被用于引用<br>are used for blockquotes.</p>
<blockquote>
<p>你也可以嵌套引用.</p>
</blockquote>
<h4 id="Headers-in-blockquotes-引用中嵌入标题"><a href="#Headers-in-blockquotes-引用中嵌入标题" class="headerlink" title="Headers in blockquotes 引用中嵌入标题"></a>Headers in blockquotes 引用中嵌入标题</h4><ul>
<li>You can quote a list. 引用中嵌入列表</li>
<li>Etc.<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">代码嵌入</div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<p><code>&lt;code&gt;</code> spans are delimited<br>by backticks.</p>
<p>You can include literal backticks<br>like <code>`this` </code>.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">代码块</div><div class="line">Indent every line of a code block by at least 4 spaces or 1 tab.</div></pre></td></tr></table></figure></p>
<pre><code>This is a normal paragraph.

    This is a preformatted
    code block.
</code></pre><p>```</p>
<p>水平线<br>三个破折号或者星号</p>
<hr>
<hr>
<hr>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Markdown/">Markdown</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android支持库"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/13/Android支持库/">Android支持库(转)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/13/Android支持库/" class="article-date">
	  <time datetime="2017-04-12T23:42:30.000Z" itemprop="datePublished">2017-04-13</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>随着 Android 5.0 Lollipop 的发布，Android 又为我们提供了更多的支持包，但是我相信大部分开发者都同我之前一样不知道这些包里究竟有些什么东西，我们应该在什么时候使用它。现在，我们就来逐个看看每一个版本的 Support 包中所拥有的东西，让用到他的时候不再迷茫。</p>
<p>首先，你需要了解每一个 Support 包版本后缀 vX 所代表的含义。当然我相信来看博客的诸位都一定知道 Android 对于每一个版本都有一个版本号，例如2.1是7，4.0是14，5.0是21。而这里，v 之后的数字，就代表着他能够被使用的最低版本等级，之所以无法在更低版本进行使用的原因，是因为随着版本的升级，在新版本中有很多之前不支持的特性或者 API，因此如果你在老版本中使用了这些支持包，就可能会导致应用崩溃。</p>
<p>现在，我们从头开始逐个浏览目前所支持的 support 包:</p>
<h5 id="1-support-v4"><a href="#1-support-v4" class="headerlink" title="1. support-v4"></a>1. support-v4</h5><pre><code>support-v4包算是 Android 最低等级的支持包。所谓的 v4,代表着它最低支持 Android1.6(API Level4)，这个版本算得上是一个真正意义上比较成熟的 Android版本，更何况现在我们写应用的时候一般都只最低支持到 Android 2.x 系统，对于1.x 的系统基本已经已经完全抛弃了，因此你可已经他作为最基本的系统组件使用。

在 support-v4包中，它所拥有的类还是很多的，主要包含了对应用组件的支持，用户交互体验的一些工具类，一些数据网络方面的工具类，相面我们将详细来看看它里面具体的一些类。

1. 系统组件部分
Fragment:其实 Fragment 是直到 Android3.0才正式进入 Android 框架体系的，但是 Android 为了低版本的兼容，因此他帮我们在低版本也适配了 Fragment 框架
NotificationCompat:这是通知栏的一些适配，可以帮助你在低版本的通知栏显示更加丰富的信息
LocalBroadcastManager:这个是用于本地广播通知的，当你希望发送的通知只被本应用接收时，你就应该使用它

2. 用户界面交互部分
ViewPager，这个相信我不用怎么说了，他主要用于帮助我们进行界面间的滑动交互
PagerTitleStrip,PagerTabStrip 这两个算是 ViewPager 的帮助类吧，他们的作用是进行 Tab 栏的切换辅助显示
DrawerLayout，主要用于侧滑栏的实现
SlidingPaneLayout,这个类也是用于侧滑栏的实现，和 DrawerLayout 不同的是，DrawerLayout 侧滑栏出来的时候，默认是覆盖在当前页面上，而 SlidingPaneLayout 则是会将当前页面移走。

3. Accessbility访问的帮助类
ExploreByTouchHelper，帮助自定义 View 实现 Accessibility 的工具类
AccessbilityEventCompat, AccessbilityNodeInfoCompat, AccessbilityNodeProviderCompat, AccessbilityDelegateCompat，这几个都是用作 Accessibility 功能适配的类

4. 数据访问帮助类
Loader，主要用于异步加载数据
FileProvider，提供应用间的文件分享功能
</code></pre><h5 id="2-support-v7"><a href="#2-support-v7" class="headerlink" title="2. support-v7"></a>2. support-v7</h5><pre><code>1.Appcompat
这个包的主要作用是为了在低版本实现 Android 的 Holo 风格界面而引入的，与之类似的有一个开源项目叫做 SherlockActionbar

2.CardView
卡片布局是最近在 android5.0发布的时候才引入的新包，在我看来，他主要效果是让应用进行卡片花显示

3.GridLayout
网格布局能够帮助你将整个布局按照一格两格的格子形式进行排列

4.MediaRouter
这个布局主要是用来支持 GoogleCast 的，主要用于进行设备间的音频，视频交换显示

5.Palette
这个包也是最新出来的，他的作用是帮助 Android 实现他的 MaterialDesign，让你的 Actionbar 能够根据界面进行对应的颜色改变

7.RecyclerView
这个包同样也是刚出来的，他的作用是替换 ListView 和 GridView，但是可惜是没有实现 OnItemClick 这些接口，你需要自己处理它
</code></pre><h5 id="3-support-v8"><a href="#3-support-v8" class="headerlink" title="3. support-v8"></a>3. support-v8</h5><pre><code>support-v8中其实只有一格特性，就是用来渲染脚本
</code></pre><h5 id="4-support-v13"><a href="#4-support-v13" class="headerlink" title="4. support-v13"></a>4. support-v13</h5><pre><code>这个包的作用主要是为 Android3.2级以上的系统提供更多地 Framgnet 特性支持，使用它的原因在于，android-support-v4包中虽然也对 Fragment 做了支持，由于要兼容低版本，导致他是自行实现的 Fragment 效果，在高版本的 Fragment 的一些特性丢失了，而对于 v13以上的 sdk 版本，我们可以使用更加有效，特性更多的代码
</code></pre><h5 id="5-support-v17"><a href="#5-support-v17" class="headerlink" title="5. support-v17"></a>5. support-v17</h5><pre><code>这个包得主要作用是用于支持电视设备，并为电视设备提供了很多组件
例如下面的:
BrowseFragment， DetailFragment， PlaybasckOverlayFragment， SearchFragment
但是原谅我没有做过 Android TV 开发，我也不知道他们的用处是什么，如果真的想要查看，请去官网看看吧
</code></pre><p><a href="https://developer.android.com/topic/libraries/support-library/index.html" title="Android支持库" target="_blank" rel="external">https://developer.android.com/topic/libraries/support-library/index.html</a></p>
<p>转自<a href="http://www.2cto.com/kf/201411/350928.html" target="_blank" rel="external">http://www.2cto.com/kf/201411/350928.html</a></p>
<h2 id="附：API与Android版本对应表："><a href="#附：API与Android版本对应表：" class="headerlink" title="附：API与Android版本对应表："></a>附：API与Android版本对应表：</h2><pre><code>Code name            Version             API level
Nougat                7.1                 API level 25
Nougat                7.0                 API level 24
Marshmallow            6.0                 API level 23
Lollipop            5.1                 API level 22
Lollipop            5.0                 API level 21, NDK 10
KitKat                4.4 - 4.4.4         API level 19
Jelly Bean            4.3.x             API level 18
Jelly Bean            4.2.x             API level 17
Jelly Bean            4.1.x             API level 16
Ice Cream Sandwich    4.0.3 - 4.0.4     API level 15, NDK 8
Ice Cream Sandwich    4.0.1 - 4.0.2     API level 14, NDK 7
Honeycomb            3.2.x             API level 13
Honeycomb            3.1                 API level 12, NDK 6
Honeycomb            3.0                 API level 11
Gingerbread            2.3.3 - 2.3.7     API level 10
Gingerbread            2.3 - 2.3.2         API level 9, NDK 5
Froyo                2.2.x             API level 8, NDK 4
Eclair                2.1                 API level 7, NDK 3
Eclair                2.0.1             API level 6
Eclair                2.0                 API level 5
Donut                1.6                 API level 4, NDK 2
Cupcake                1.5                 API level 3, NDK 1
(no code name)        1.1                 API level 2
(no code name)        1.0              API level 1
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-Support/">Android Support</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android_init_rc"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/12/Android_init_rc/">Android init.rc</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/12/Android_init_rc/" class="article-date">
	  <time datetime="2017-04-12T04:22:33.000Z" itemprop="datePublished">2017-04-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="init-rc"><a href="#init-rc" class="headerlink" title="init.rc"></a>init.rc</h1>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/init-rc/">init.rc</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android编译系统——完整编译过程分析"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/12/Android编译系统——完整编译过程分析/">Android编译系统——完整编译过程分析</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/12/Android编译系统——完整编译过程分析/" class="article-date">
	  <time datetime="2017-04-12T04:22:33.000Z" itemprop="datePublished">2017-04-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>###编译命令<br>    make //整体编译Android<br>    mm<br>    mmm<br>    get_build_var TARGET_PRODUCT  //获取指定变量的当前值</p>
<pre><code>待续...
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编译/">编译</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-InputSystem003_AndroidInputSystem"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/12/InputSystem003_AndroidInputSystem/">Input系统——Android Input系统</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/12/InputSystem003_AndroidInputSystem/" class="article-date">
	  <time datetime="2017-04-12T04:22:33.000Z" itemprop="datePublished">2017-04-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="Input系统结构解析"><a href="#Input系统结构解析" class="headerlink" title="Input系统结构解析"></a>Input系统结构解析</h3><pre><code>InputManager.java (frameworks\base\core\java\android\hardware\input)     
InputManagerInternal.java (frameworks\base\core\java\android\hardware\input)     

IInputManager.aidl (frameworks\base\core\java\android\hardware\input)     ----------------------

InputManagerService.java (frameworks\base\services\core\java\com\android\server\input) 

InputManagerService == jni ==&gt; NativeInputManager  ---------------------------------------------
com_android_server_input_InputManagerService.cpp (frameworks\base\services\core\jni)


InputManager.cpp (frameworks\native\services\inputflinger) 
EventHub.cpp (frameworks\native\services\inputflinger) 
</code></pre><h3 id="查看event注册设备"><a href="#查看event注册设备" class="headerlink" title="查看event注册设备"></a>查看event注册设备</h3><pre><code>shell@rk3368_32:/dev/input # cat /proc/bus/input/devices
I: Bus=0000 Vendor=0000 Product=0003 Version=206a
N: Name=&quot;synaptics_dsx&quot;
P: Phys=synaptics_dsx/touch_input
S: Sysfs=/devices/ff140000.i2c/i2c-2/2-0020/input/input0
U: Uniq=
H: Handlers=event0 cpufreq ddr_freq 
B: PROP=2
B: EV=b
B: KEY=420 0 0 0 0 0 8000 0 0 0 0
B: ABS=2638000 3

I: Bus=0019 Vendor=0000 Product=0000 Version=0000
N: Name=&quot;rotary.35&quot;
P: Phys=
S: Sysfs=/devices/rotary.35/input/input1
U: Uniq=
H: Handlers=event1 
B: PROP=0
B: EV=5
B: REL=1

I: Bus=0019 Vendor=0001 Product=0001 Version=0100
N: Name=&quot;rk29-keypad&quot;
P: Phys=gpio-keys/input0
S: Sysfs=/devices/ff100000.adc/key.38/input/input2
U: Uniq=
H: Handlers=event2 ddr_freq keychord 
B: PROP=0
B: EV=3
B: KEY=8000 100000 0 0 0

I: Bus=0000 Vendor=0000 Product=0000 Version=0000
N: Name=&quot;temperature&quot;
P: Phys=
S: Sysfs=/devices/ff160000.i2c/i2c-4/4-005b/input/input3
U: Uniq=
H: Handlers=event3 
B: PROP=0
B: EV=9
B: ABS=40
</code></pre><h3 id="查看Handler个数"><a href="#查看Handler个数" class="headerlink" title="查看Handler个数"></a>查看Handler个数</h3><pre><code>shell@rk3368_box:/dev/input # ls -l                                            
crw-rw---- root     input     13,  64 2017-04-12 11:15 event0
crw-rw---- root     input     13,  65 2017-04-12 11:15 event1
crw-rw---- root     input     13,  66 2017-04-14 08:12 event2
crw-rw---- root     input     13,  67 2017-04-14 08:12 event3

cat event0 
cat event1
</code></pre><h3 id="获取事件"><a href="#获取事件" class="headerlink" title="获取事件"></a>获取事件</h3><pre><code># getevent -h
Usage: getevent [-t] [-n] [-s switchmask] [-S] [-v [mask]] [-d] [-p] [-i] [-l] [-q] [-c count] [-r] [device]
    -t: show time stamps
    -n: don&apos;t print newlines
    -s: print switch states for given bits
    -S: print all switch states
    -v: verbosity mask (errs=1, dev=2, name=4, info=8, vers=16, pos. events=32, props=64)
    -d: show HID descriptor, if available
    -p: show possible events (errs, dev, name, pos. events)
    -i: show all device info and possible events
    -l: label event types and names in plain text
    -q: quiet (clear verbosity mask)
    -c: print given number of events then exit
    -r: print rate events are received

如：getevent -r -q 监控设备的sendevent事件 

shell@rk3368_32:/dev/input # getevent                                      
add device 1: /dev/input/event3
  name:     &quot;temperature&quot;
add device 2: /dev/input/event1
  name:     &quot;rotary.35&quot;
add device 3: /dev/input/event0
  name:     &quot;synaptics_dsx&quot;
add device 4: /dev/input/event2
  name:     &quot;rk29-keypad&quot;

/dev/input/event1: 0002 0000 00000001   ID=1    EV_REL=0x02   REL_X = 0x00    Value = 0x01
/dev/input/event1: 0000 0000 00000000   ID=0    EV_SYN 0x00   SYN_REPORT = 0  Value = 0x00
/dev/input/event1: 0002 0000 00000001       
/dev/input/event1: 0000 0000 00000000       
/dev/input/event1: 0002 0000 00000001
/dev/input/event1: 0000 0000 00000000
/dev/input/event1: 0002 0000 ffffffff       EV_REL=0x02   REL_X = 0x00    Value = 0xffffffffff
/dev/input/event1: 0000 0000 00000000
/dev/input/event1: 0002 0000 ffffffff
</code></pre><h3 id="1-input-device-id"><a href="#1-input-device-id" class="headerlink" title="1. input_device_id"></a>1. input_device_id</h3><pre><code>struct input_device_id {
 kernel_ulong_t flags;
 __u16 bustype;  // BUS_USB  BUS_BLUETOOTH  
 __u16 vendor;
 __u16 product;
 __u16 version;
 kernel_ulong_t evbit[INPUT_DEVICE_ID_EV_MAX / BITS_PER_LONG + 1];

 kernel_ulong_t keybit[INPUT_DEVICE_ID_KEY_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t relbit[INPUT_DEVICE_ID_REL_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t absbit[INPUT_DEVICE_ID_ABS_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t mscbit[INPUT_DEVICE_ID_MSC_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t ledbit[INPUT_DEVICE_ID_LED_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t sndbit[INPUT_DEVICE_ID_SND_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t ffbit[INPUT_DEVICE_ID_FF_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t swbit[INPUT_DEVICE_ID_SW_MAX / BITS_PER_LONG + 1];
 kernel_ulong_t driver_info;
};
</code></pre><h3 id="2-input-event-input-h"><a href="#2-input-event-input-h" class="headerlink" title="2. input_event (input.h)"></a>2. input_event (input.h)</h3><pre><code>struct input_event {
    struct timeval time;
    __u16 type;
    __u16 code;
    __s32 value;
};
</code></pre><h3 id="3-RawEvent-EventHub-h"><a href="#3-RawEvent-EventHub-h" class="headerlink" title="3. RawEvent (EventHub.h)"></a>3. RawEvent (EventHub.h)</h3><pre><code>struct RawEvent {
    nsecs_t when;       time
    int32_t deviceId;   ID    = 1       ID         = 0
    int32_t type;       EV_REL= 0x02    EV_SYN     = 0x00
    int32_t code;       REL_X = 0x00    SYN_REPORT = 0
    int32_t value;      Value = 0x01    Value      = 0x00
};
</code></pre><h3 id="Input设备类型"><a href="#Input设备类型" class="headerlink" title="Input设备类型"></a>Input设备类型</h3><p>从元特性来划分<br>    EV_KEY 按键          INPUT_DEVICE_CLASS_KEYBOARD  INPUT_DEVICE_CLASS_KEYMOUSE<br>    EV_REL 相对坐标<br>    EV_ABS绝对坐标<br>    EV_MSC 其它<br>    EV_LED LED<br>    EV_SND 声音<br>    EV_FF 力反馈<br>    EV_SW 开关???</p>
<p>从常见特性来划分（一个产品可能有多个特性）<br>    按键  KEY_RESERVED-0x0 ~ KEY_MAX-0x2ff                     INPUT_DEVICE_CLASS_KEYBOARD</p>
<pre><code>    普通键盘按键     0x0~0x100     0x160~0x2ff    INPUT_DEVICE_CLASS_KEYBOARD  INPUT_DEVICE_CLASS_KEYMOUSE
    游戏柄的按键     0x100~0x110   0x120~0x140    INPUT_DEVICE_CLASS_KEYBOARD  INPUT_DEVICE_CLASS_KEYMOUSE
    鼠标按键         BTN_MOUSE-BTN_LEFT-0x110-左键；  BTN_RIGHT-0x111-右键；  BTN_MIDDLE-0x112-中键；

相对值  REL_X-0x0 ~ REL_MAX-0x0f
    X坐标  REL_X 0x0
    Y坐标  REL_Y 0x01
    Z坐标  REL_Z 0x02
    H轮   REL_HWHEEL 0x06
    轮    REL_WHEEL  0x08
    其他  REL_MISC    0x09
          REL_MAX 0x0f

绝对值 ABS_X-0x0 ~ ABS_MAX-0x3f
    X坐标  ABS_X 0x0
    Y坐标  ABS_Y 0x01
    Z坐标  ABS_Z 0x02
    轮    ABS_WHEEL  0x08
          ABS_GAS 0x09
          ABS_DISTANCE 0x19
          ABS_VOLUME 0x20
          ABS_MISC 0x28 
          ABS_MT_SLOT 0x2f
          ABS_MT_TOUCH_MAJOR 0x30
          ABS_MT_TOUCH_MINOR 0x31
          ABS_MT_WIDTH_MAJOR 0x32
          ABS_MT_WIDTH_MINOR 0x33
          ABS_MT_ORIENTATION 0x34
          ABS_MT_POSITION_X 0x35
          ABS_MT_POSITION_Y 0x36
          ABS_MAX 0x3f

FF压力 FF_RUMBLE-0x50 ~ FF_MAX-0x7f
    FF_RUMBLE 0x50
    FF_CONSTANT 0x52
</code></pre><p>从Class 来区分<br>    INPUT_DEVICE_CLASS_CURSOR<br>        有BTN_MOUSE 按钮 且 REL_X  REL_Y </p>
<pre><code>INPUT_DEVICE_CLASS_TOUCH | INPUT_DEVICE_CLASS_TOUCH_MT 
    有BTN_TOUCH  ABS_MT_POSITION_X ABS_MT_POSITION_Y 且没有游戏键

INPUT_DEVICE_CLASS_JOYSTICK 


INPUT_DEVICE_CLASS_SWITCH
    任一个即可


INPUT_DEVICE_CLASS_VIBRATOR
    有FF_RUMBLE-0x50
</code></pre><p>按键类型还有按键map<br>    key map.</p>
<p><a href="https://source.android.com/devices/input/overview" target="_blank" rel="external">https://source.android.com/devices/input/overview</a><br><a href="https://www.kernel.org/doc/Documentation/input/event-codes.txt" target="_blank" rel="external">https://www.kernel.org/doc/Documentation/input/event-codes.txt</a><br><a href="https://www.kernel.org/doc/Documentation/input/input.txt" target="_blank" rel="external">https://www.kernel.org/doc/Documentation/input/input.txt</a></p>
<p>MotionEvent.AXIS_WHEEL</p>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/event/">event</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/input/">input</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/input系统/">input系统</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android_mk"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/12/Android_mk/">Android.mk</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/12/Android_mk/" class="article-date">
	  <time datetime="2017-04-12T04:22:33.000Z" itemprop="datePublished">2017-04-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Android-mk"><a href="#Android-mk" class="headerlink" title="Android.mk"></a>Android.mk</h1>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-mk/">Android.mk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Makefile/">Makefile</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/build/">build</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/">下一页 &raquo;</a>
  </nav>

</section>
        
      </div>
      
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2012 - 2017 进无止境&#39;s 博客 All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				<span id="busuanzi_container_site_uv"> 访客数 : <span id="busuanzi_value_site_uv"></span></span> |  
				<span id="busuanzi_container_site_pv"> 访问量 : <span id="busuanzi_value_site_pv"></span></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    


  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>


  <script src="/js/home.js"></script>








  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            进无止境&#39;s 博客
          </div>
          <div class="panel-body">
            Copyright © 2017 Jim All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  

	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


</body>
</html>