<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>进无止境&#39;s 博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="进无止境's 博客">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="进无止境's 博客">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="进无止境's 博客">
  
    <link rel="alternate" href="/atom.xml" title="进无止境&#39;s 博客" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/mylogo.jpg">
  <link rel="apple-touch-icon" href="/css/images/mylogo.jpg">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
  <link rel="stylesheet" href="/css/style.css">

  <script src="/js/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="/css/bootstrap.css" >

  
    <link rel="stylesheet" href="/css/home.css" >
  

  

  

</head>



  <body>


  
    <header id="header">

  
    <div id="intrologo" class="intro-logo" style="background-position:center; background-repeat:no-repeat; background-image: url(); background-size: auto 100%;">
    <script>
        var imgUrls = "https://drscdn.500px.org/photo/205349685/q%3D80_m%3D2000/d1509b5f99333da2af557aa1fbc52c3b,css/images/home-bg.jpg".split(",");
        var random = Math.floor((Math.random() * imgUrls.length ));
        if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
          document.getElementById("intrologo").style.backgroundImage='url(' + imgUrls[random] + ')';
        } else {
          document.getElementById("intrologo").style.backgroundImage='url(/' + imgUrls[random] + ')';
        }
    </script>
  

    <canvas width="100%" height="100%"></canvas>
    <script>
      var c = document.getElementsByTagName('canvas')[0],
          x = c.getContext('2d'),
          w = window.innerWidth,
          h = window.innerHeight,
          pr = window.devicePixelRatio || 1,
          f = 90,
          q,
          m = Math,
          r = 0,
          u = m.PI*2,
          v = m.cos,
          z = m.random
      c.width = w*pr
      c.height = h*pr
      x.scale(pr, pr)
      x.globalAlpha = 0.6

      
    </script>
    

    
      <div id="homelogo" class="homelogo" style="background: rgba(255,255,255,1);"> 
    

        
          <div class="homelogoback"  style="border: 1px solid #404040;" >
            <h1><a href="#content" id="logo">进无止境&#39;s 博客</a></h1>
            <h3></h3>
            <h5>Jim</h5>
            <!-- <p><a href="https://github.com/iTimeTraveler" target="_blank">Github</a></p> -->
          </div>
        
    
    </div>
  </div>

  <!-- 自适应主页背景大图 -->
  
    <script>
        var img = new Image();
        var intrologodiv = document.getElementById("intrologo");
        img.src = intrologodiv.style.backgroundImage.replace('url(','').replace(')','').replace(/\"/gi, "");
        img.onload=function(){
          if (img.width / img.height <= document.body.clientWidth / document.body.clientHeight) {
            intrologodiv.style.backgroundSize = "100% auto";
          } else {
            intrologodiv.style.backgroundSize = "auto 100%";
          }
        };
    </script>
 

 <!-- home_logo_image居中 -->
 
    <script>
        var homelogodiv = document.getElementById("homelogo");
        if (document.all.homelogo.offsetWidth > document.body.clientWidth) {
          homelogodiv.style.width = document.body.clientWidth + "px";
          homelogodiv.style.marginLeft = document.body.clientWidth * -0.5 + "px";
        } else {
          homelogodiv.style.width = homelogodiv.clientWidth  + "px";
          homelogodiv.style.marginLeft = (homelogodiv.clientWidth)  * -0.5 + "px";
        }
    </script>
  

  <div class="intro-navigate">
      <p class="navigater-list">
        
          <a id="beautifont" class="main-nav-link" href="/">首页</a>
        
          <a id="beautifont" class="main-nav-link" href="/archives">归档</a>
        
          <a id="beautifont" class="main-nav-link" href="/about">关于</a>
        
      </p>
  </div>

</header>
  
  <div id="container">
    <div id="wrap">
      
            
      <div id="content" class="outer">
        
          <section id="main" style="float:none;">
  
    <article id="post-Markdown使用"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/13/Markdown使用/">Markdown&amp;MarkdownPad编辑器</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/13/Markdown使用/" class="article-date">
	  <time datetime="2017-04-13T11:55:33.000Z" itemprop="datePublished">2017-04-13</time>
	</a>

      
    <a class="article-category-link" href="/categories/杂类/">杂类</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="MarkdownPad编辑器添加表格的扩展"><a href="#MarkdownPad编辑器添加表格的扩展" class="headerlink" title="MarkdownPad编辑器添加表格的扩展"></a>MarkdownPad编辑器添加表格的扩展</h3><p><code>工具 》选项 》 Markdown 》Markdown处理器 改为 “Markdown(扩展)”即可。</code></p>
<p>表格语法:</p>
<pre>
| Tables        | Are           | Cool  |
| :------------ |:-------------:| -----:|
| col 3 is      | right-aligned | $1600 |
| col 2 is      | centered      |   $12 |
| zebra stripes | are neat      |    $1 |
</pre>

<pre><code>:---- 左对齐,默认左对齐
:---: 居中
----: 右对齐
</code></pre><h3 id="在设置的过程中要注册markdownpad2"><a href="#在设置的过程中要注册markdownpad2" class="headerlink" title="在设置的过程中要注册markdownpad2"></a>在设置的过程中要注册markdownpad2</h3><p>邮箱：</p>
<p>Soar360@live.com</p>
<p>授权秘钥：</p>
<p>GBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2<br>M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6<br>Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5C<br>Cx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr<br>0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==</p>
<h3 id="Markdown编辑器快捷键："><a href="#Markdown编辑器快捷键：" class="headerlink" title="Markdown编辑器快捷键："></a>Markdown编辑器快捷键：</h3><p>· 加粗 Ctrl + B</p>
<p>· 斜体 Ctrl + I</p>
<p>· 引用 Ctrl + Q</p>
<p>· 插入链接 Ctrl + L</p>
<p>· 插入代码 Ctrl + K</p>
<p>· 插入图片 Ctrl + G</p>
<p>· 提升标题 Ctrl + H</p>
<p>· 有序列表 Ctrl + O</p>
<p>· 无序列表 Ctrl + U</p>
<p>· 横线 Ctrl + R</p>
<p>· 撤销 Ctrl + Z</p>
<p>· 重做 Ctrl + Y</p>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Markdown/">Markdown</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android支持库"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/13/Android支持库/">Android支持库(转)</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/13/Android支持库/" class="article-date">
	  <time datetime="2017-04-12T23:42:30.000Z" itemprop="datePublished">2017-04-13</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>随着 Android 5.0 Lollipop 的发布，Android 又为我们提供了更多的支持包，但是我相信大部分开发者都同我之前一样不知道这些包里究竟有些什么东西，我们应该在什么时候使用它。现在，我们就来逐个看看每一个版本的 Support 包中所拥有的东西，让用到他的时候不再迷茫。</p>
<p>首先，你需要了解每一个 Support 包版本后缀 vX 所代表的含义。当然我相信来看博客的诸位都一定知道 Android 对于每一个版本都有一个版本号，例如2.1是7，4.0是14，5.0是21。而这里，v 之后的数字，就代表着他能够被使用的最低版本等级，之所以无法在更低版本进行使用的原因，是因为随着版本的升级，在新版本中有很多之前不支持的特性或者 API，因此如果你在老版本中使用了这些支持包，就可能会导致应用崩溃。</p>
<p>现在，我们从头开始逐个浏览目前所支持的 support 包:</p>
<h5 id="1-support-v4"><a href="#1-support-v4" class="headerlink" title="1. support-v4"></a>1. support-v4</h5><pre><code>support-v4包算是 Android 最低等级的支持包。所谓的 v4,代表着它最低支持 Android1.6(API Level4)，这个版本算得上是一个真正意义上比较成熟的 Android版本，更何况现在我们写应用的时候一般都只最低支持到 Android 2.x 系统，对于1.x 的系统基本已经已经完全抛弃了，因此你可已经他作为最基本的系统组件使用。

在 support-v4包中，它所拥有的类还是很多的，主要包含了对应用组件的支持，用户交互体验的一些工具类，一些数据网络方面的工具类，相面我们将详细来看看它里面具体的一些类。

1. 系统组件部分
Fragment:其实 Fragment 是直到 Android3.0才正式进入 Android 框架体系的，但是 Android 为了低版本的兼容，因此他帮我们在低版本也适配了 Fragment 框架
NotificationCompat:这是通知栏的一些适配，可以帮助你在低版本的通知栏显示更加丰富的信息
LocalBroadcastManager:这个是用于本地广播通知的，当你希望发送的通知只被本应用接收时，你就应该使用它

2. 用户界面交互部分
ViewPager，这个相信我不用怎么说了，他主要用于帮助我们进行界面间的滑动交互
PagerTitleStrip,PagerTabStrip 这两个算是 ViewPager 的帮助类吧，他们的作用是进行 Tab 栏的切换辅助显示
DrawerLayout，主要用于侧滑栏的实现
SlidingPaneLayout,这个类也是用于侧滑栏的实现，和 DrawerLayout 不同的是，DrawerLayout 侧滑栏出来的时候，默认是覆盖在当前页面上，而 SlidingPaneLayout 则是会将当前页面移走。

3. Accessbility访问的帮助类
ExploreByTouchHelper，帮助自定义 View 实现 Accessibility 的工具类
AccessbilityEventCompat, AccessbilityNodeInfoCompat, AccessbilityNodeProviderCompat, AccessbilityDelegateCompat，这几个都是用作 Accessibility 功能适配的类

4. 数据访问帮助类
Loader，主要用于异步加载数据
FileProvider，提供应用间的文件分享功能
</code></pre><h5 id="2-support-v7"><a href="#2-support-v7" class="headerlink" title="2. support-v7"></a>2. support-v7</h5><pre><code>1.Appcompat
这个包的主要作用是为了在低版本实现 Android 的 Holo 风格界面而引入的，与之类似的有一个开源项目叫做 SherlockActionbar

2.CardView
卡片布局是最近在 android5.0发布的时候才引入的新包，在我看来，他主要效果是让应用进行卡片花显示

3.GridLayout
网格布局能够帮助你将整个布局按照一格两格的格子形式进行排列

4.MediaRouter
这个布局主要是用来支持 GoogleCast 的，主要用于进行设备间的音频，视频交换显示

5.Palette
这个包也是最新出来的，他的作用是帮助 Android 实现他的 MaterialDesign，让你的 Actionbar 能够根据界面进行对应的颜色改变

7.RecyclerView
这个包同样也是刚出来的，他的作用是替换 ListView 和 GridView，但是可惜是没有实现 OnItemClick 这些接口，你需要自己处理它
</code></pre><h5 id="3-support-v8"><a href="#3-support-v8" class="headerlink" title="3. support-v8"></a>3. support-v8</h5><pre><code>support-v8中其实只有一格特性，就是用来渲染脚本
</code></pre><h5 id="4-support-v13"><a href="#4-support-v13" class="headerlink" title="4. support-v13"></a>4. support-v13</h5><pre><code>这个包的作用主要是为 Android3.2级以上的系统提供更多地 Framgnet 特性支持，使用它的原因在于，android-support-v4包中虽然也对 Fragment 做了支持，由于要兼容低版本，导致他是自行实现的 Fragment 效果，在高版本的 Fragment 的一些特性丢失了，而对于 v13以上的 sdk 版本，我们可以使用更加有效，特性更多的代码
</code></pre><h5 id="5-support-v17"><a href="#5-support-v17" class="headerlink" title="5. support-v17"></a>5. support-v17</h5><pre><code>这个包得主要作用是用于支持电视设备，并为电视设备提供了很多组件
例如下面的:
BrowseFragment， DetailFragment， PlaybasckOverlayFragment， SearchFragment
但是原谅我没有做过 Android TV 开发，我也不知道他们的用处是什么，如果真的想要查看，请去官网看看吧
</code></pre><p><a href="https://developer.android.com/topic/libraries/support-library/index.html" title="Android支持库" target="_blank" rel="external">https://developer.android.com/topic/libraries/support-library/index.html</a></p>
<p>转自<a href="http://www.2cto.com/kf/201411/350928.html" target="_blank" rel="external">http://www.2cto.com/kf/201411/350928.html</a></p>
<h2 id="附：API与Android版本对应表："><a href="#附：API与Android版本对应表：" class="headerlink" title="附：API与Android版本对应表："></a>附：API与Android版本对应表：</h2><pre><code>Code name            Version             API level
Nougat                7.1                 API level 25
Nougat                7.0                 API level 24
Marshmallow            6.0                 API level 23
Lollipop            5.1                 API level 22
Lollipop            5.0                 API level 21, NDK 10
KitKat                4.4 - 4.4.4         API level 19
Jelly Bean            4.3.x             API level 18
Jelly Bean            4.2.x             API level 17
Jelly Bean            4.1.x             API level 16
Ice Cream Sandwich    4.0.3 - 4.0.4     API level 15, NDK 8
Ice Cream Sandwich    4.0.1 - 4.0.2     API level 14, NDK 7
Honeycomb            3.2.x             API level 13
Honeycomb            3.1                 API level 12, NDK 6
Honeycomb            3.0                 API level 11
Gingerbread            2.3.3 - 2.3.7     API level 10
Gingerbread            2.3 - 2.3.2         API level 9, NDK 5
Froyo                2.2.x             API level 8, NDK 4
Eclair                2.1                 API level 7, NDK 3
Eclair                2.0.1             API level 6
Eclair                2.0                 API level 5
Donut                1.6                 API level 4, NDK 2
Cupcake                1.5                 API level 3, NDK 1
(no code name)        1.1                 API level 2
(no code name)        1.0              API level 1
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android-Support/">Android Support</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android编译系统——完整编译过程分析"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/12/Android编译系统——完整编译过程分析/">Android编译系统——完整编译过程分析</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/12/Android编译系统——完整编译过程分析/" class="article-date">
	  <time datetime="2017-04-12T04:22:33.000Z" itemprop="datePublished">2017-04-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>###编译命令<br>    make //整体编译Android<br>    mm<br>    mmm<br>    get_build_var TARGET_PRODUCT  //获取指定变量的当前值</p>
<pre><code>待续...
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编译/">编译</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android 编译系统——system.img userdata.img recovery.img目标编译过程"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/11/Android 编译系统——system.img userdata.img recovery.img目标编译过程/">Android编译系统——ramdisk.img system.img userdata.img recovery.img目标编译过程</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/11/Android 编译系统——system.img userdata.img recovery.img目标编译过程/" class="article-date">
	  <time datetime="2017-04-11T09:35:57.000Z" itemprop="datePublished">2017-04-11</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="image-介绍"><a href="#image-介绍" class="headerlink" title="image 介绍"></a>image 介绍</h2><pre><code>boot.img      Android 的初始文件映像，负责初始化并加载 system 分区，一般Android系统这个镜像中包含ramdisk.img根文件系统+kernel（RK平台的boot.img是没包含kernel部分的）
recovery.img  恢复模式系统启动镜像。内容和boot.img雷同（RK平台recovery.img包含kernel部分），但是其中的ramdisk.img（ramdisk-recovery.img）有些许不同：
              recovery.fstab文件、sbin下部分工具、build.prop、init.bootmode.emmc.rc、sepolicy等

ramdisk.img   是根文件系统，是root目录打包成的镜像（ramdisk-recovery.img）
system.img    包括了主要的包、库等文件
userdata.img  包括了一些用户数据
</code></pre><h2 id="image-目标编译过程"><a href="#image-目标编译过程" class="headerlink" title="image 目标编译过程"></a>image 目标编译过程</h2><pre><code>---build/core/main.mk中---
默认目标，即目标all
.PHONY: droid
DEFAULT_GOAL := droid
$(DEFAULT_GOAL):             //root目标droid

droid: droidcore dist_files  //1级目标，droidcore

droidcore: files \             //2级目标，files systemimage ...
    systemimage \
    $(INSTALLED_BOOTIMAGE_TARGET) \
    $(INSTALLED_RECOVERYIMAGE_TARGET) \
    $(INSTALLED_USERDATAIMAGE_TARGET) \
    $(INSTALLED_CACHEIMAGE_TARGET) \
    $(INSTALLED_VENDORIMAGE_TARGET) \
    $(INSTALLED_FILES_FILE)

---build/core/Makefile中---
INSTALLED_SYSTEMIMAGE := $(PRODUCT_OUT)/system.img
BUILT_SYSTEMIMAGE := $(systemimage_intermediates)/system.img
FULL_SYSTEMIMAGE_DEPS := $(INTERNAL_SYSTEMIMAGE_FILES) $(INTERNAL_USERIMAGES_DEPS)
INSTALLED_FILES_FILE := $(PRODUCT_OUT)/installed-files.txt


systemimage: $(INSTALLED_SYSTEMIMAGE)        //3级目标 ./system.img

$(INSTALLED_SYSTEMIMAGE): $(BUILT_SYSTEMIMAGE) $(RECOVERY_FROM_BOOT_PATCH) | $(ACP)    //4级目标  _./system.img

$(BUILT_SYSTEMIMAGE): $(FULL_SYSTEMIMAGE_DEPS) $(INSTALLED_FILES_FILE)                 //5级目标  
    $(call build-systemimage-target,$@)


BUILT_USERDATAIMAGE_TARGET := $(PRODUCT_OUT)/userdata.img
INSTALLED_USERDATAIMAGE_TARGET := $(BUILT_USERDATAIMAGE_TARGET)
INTERNAL_USERDATAIMAGE_FILES := \                                                      //4级目标
    $(filter $(TARGET_OUT_DATA)/%,$(ALL_DEFAULT_INSTALLED_MODULES))

$(INSTALLED_USERDATAIMAGE_TARGET): $(INTERNAL_USERIMAGES_DEPS) \                       //3级目标
                               $(INTERNAL_USERDATAIMAGE_FILES)
    $(build-userdataimage-target)

define build-userdataimage-target  //做userdata.img分区build操作
  $(call pretty,&quot;Target userdata fs image: $(INSTALLED_USERDATAIMAGE_TARGET)&quot;)
  @mkdir -p $(TARGET_OUT_DATA)
  @mkdir -p $(userdataimage_intermediates) &amp;&amp; rm -rf $(userdataimage_intermediates)/userdata_image_info.txt
  $(call generate-userimage-prop-dictionary, $(userdataimage_intermediates)/userdata_image_info.txt, skip_fsck=true)
  $(hide) PATH=$(foreach p,$(INTERNAL_USERIMAGES_BINARY_PATHS),$(p):)$$PATH \
      ./build/tools/releasetools/build_image.py \
      $(TARGET_OUT_DATA) $(userdataimage_intermediates)/userdata_image_info.txt $(INSTALLED_USERDATAIMAGE_TARGET)
  $(hide) $(call assert-max-image-size,$(INSTALLED_USERDATAIMAGE_TARGET),$(BOARD_USERDATAIMAGE_PARTITION_SIZE))
endef


注 userdata.img 会依赖skip_userdata.img := 这个变量以及嵌套依赖BoardConfig.mk 中的BOARD_USERDATAIMAGE_PARTITION_SIZE和TARGET_USERIMAGES_USE_EXT4的值
</code></pre><h2 id="image解压方法"><a href="#image解压方法" class="headerlink" title="image解压方法"></a>image解压方法</h2><pre><code>ramdisk.img   用file命令查看显示ramdisk.img: gzip compressed data, from Unix，采用cpio打包，gzip压缩的
    cp -a ramdisk.img 000/ramdisk.img.gz
    cd 000/
    gunzip ramdisk.img.gz //得到ramdisk.img 文件，但是和原始的ramdisk.img是不一样的，大小要大不少
    mkdir root
    cd root
    cpio –i -F ../ramdisk.img

system.img    用file命令查看显示system.img: data
    cp -a system.img 000/system.img
    cd 000/
    out/host/linux-x86/bin/simg2img system.img system.ext4.img //用simg2img工具把system.img转为为ext4文件格式
    mkdir system                                       //建立system目录
    sudo mount -t ext4 -o loop system.ext4.img system  //将ext4格式的镜像挂在到system目录

userdata.img  用file命令查看显示userdata.img: data
    同system.img

recovery.img  用file命令查看显示recovery.img: data
    需要使用外部工具https://github.com/xiaolu/mkbootimg_tools.git  mkboot命令
    ./mkbootimg_tools/mkboot recovery.img recovery

boot.img      用file命令查看显示boot.img: data
    需要使用外部工具https://github.com/xiaolu/mkbootimg_tools.git  mkboot命令
    ./mkbootimg_tools/mkboot boot.img boot 
</code></pre><h2 id="image压缩方法"><a href="#image压缩方法" class="headerlink" title="image压缩方法"></a>image压缩方法</h2><pre><code>a. ramdisk 使用cpio -o -H | gzip 生成ramdisk.img
b. system userdata recovery都可以使用mkuserimg.sh来压缩成镜像
   mkuserimg.sh -s 镜像源目录 镜像输出文件 ext4 挂在点 分区size FILE_CONTEXTS文件
</code></pre><h2 id="单独编译image"><a href="#单独编译image" class="headerlink" title="单独编译image"></a>单独编译image</h2><pre><code>make systemimage - system.img
make userdataimage - userdata.img
make ramdisk - ramdisk.img
make snod - 快速打包system.img (with this command, it will build a new system.img very quickly. 
            well, you cannot use &quot;make snod&quot; for all the situations. it would not check the dependences. 
            if you change some code in the framework which will effect other applications)
</code></pre><h2 id="附"><a href="#附" class="headerlink" title="附:"></a>附:</h2><pre><code>simg2img解压缩工具: Convert Android sparse images to raw images. 在out/host/linux-x86/bin/simg2img可以找到
用法：simg2img &lt;sparse_image_files&gt; &lt;raw_image_file&gt;

mkuserimg.sh镜像制作工具，在out/host/linux-x86/bin/mkuserimg.sh可以找到，工具中会调用make_ext4fs
用法：mkuserimg.sh [-s] SRC_DIR OUTPUT_FILE EXT_VARIANT MOUNT_POINT SIZE [-j &lt;journal_size&gt;]
         [-T TIMESTAMP] [-C FS_CONFIG] [-B BLOCK_LIST_FILE] [FILE_CONTEXTS]

    例如制作system.img和userdata.img时：
    Running:  mkuserimg.sh -s out/target/product/rk3368_box/system out/target/product/rk3368_box/obj/PACKAGING/systemimage_intermediates/system.img ext4 system 1073741824 out/target/product/rk3368_box/root/file_contexts
    make_ext4fs -s -T -1 -S out/target/product/rk3368_box/root/file_contexts -l 1073741824 -a system out/target/product/rk3368_box/obj/PACKAGING/systemimage_intermediates/system.img out/target/product/rk3368_box/system

    Running:  mkuserimg.sh -s out/target/product/rk3368_box/data out/target/product/rk3368_box/userdata.img ext4 data 2147483648 out/target/product/rk3368_box/root/file_contexts
    make_ext4fs -s -T -1 -S out/target/product/rk3368_box/root/file_contexts -l 2147483648 -a data out/target/product/rk3368_box/userdata.img out/target/product/rk3368_box/data

make_ext4fs工具：用于Android平台上制作ext4文件系统的镜像，在out/host/linux-x86/bin/make_ext4fs
用法：make_ext4fs [ -l &lt;len&gt; ] [ -j &lt;journal size&gt; ] [ -b &lt;block_size&gt; ]
                 [ -g &lt;blocks per group&gt; ] [ -i &lt;inodes&gt; ] [ -I &lt;inode size&gt; ]
                 [ -L &lt;label&gt; ] [ -f ] [ -a &lt;android mountpoint&gt; ]
                 [ -S file_contexts ] [ -C fs_config ] [ -T timestamp ]
                 [ -z | -s ] [ -w ] [ -c ] [ -J ] [ -v ] [ -B &lt;block_list_file&gt; ] &lt;filename&gt; [&lt;directory&gt;]
        -l 分区大小 支持512M 以及1073741824 单位为bytes
        -s 生成ext4的S模式制作
        -a 挂在点
        -S  file_contexts文件
        &lt;filename&gt;  生成的目的文件
        &lt;directory&gt; 源文件目录
</code></pre><h2 id="附2——一般Android系统的boot-img格式-RK平台的boot-img是没包含kernel部分的"><a href="#附2——一般Android系统的boot-img格式-RK平台的boot-img是没包含kernel部分的" class="headerlink" title="附2——一般Android系统的boot.img格式(RK平台的boot.img是没包含kernel部分的)"></a>附2——一般Android系统的boot.img格式(RK平台的boot.img是没包含kernel部分的)</h2><pre><code>因为boot.img的格式比较简单，它主要分为三大块（有的可能有四块）

+—————–+
| boot header | 1 page
+—————–+
| kernel | n pages
+—————–+
| ramdisk | m pages
+—————–+
| second stage | o pages
+—————–+
n = (kernel_size + page_size – 1) / page_size
m = (ramdisk_size + page_size – 1) / page_size
o = (second_size + page_size – 1) / page_size

a. all entities are page_size aligned in flash
b. kernel and ramdisk are required (size != 0)
c. second is optional (second_size == 0 -&gt; no second)
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/image/">image</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/编译/">编译</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-RK平台分区信息"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/11/RK平台分区信息/">RK平台分区信息</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/11/RK平台分区信息/" class="article-date">
	  <time datetime="2017-04-11T09:35:57.000Z" itemprop="datePublished">2017-04-11</time>
	</a>

      
    <a class="article-category-link" href="/categories/RK/">RK</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="RK平台分区信息与eMMC-partitions对应"><a href="#RK平台分区信息与eMMC-partitions对应" class="headerlink" title="RK平台分区信息与eMMC partitions对应"></a>RK平台分区信息与eMMC partitions对应</h2><pre><code>lrwxrwxrwx root     root    2013-01-21 08:50 uboot            -&gt; /dev/block/mmcblk0p1
lrwxrwxrwx root     root    2013-01-21 08:50 trust            -&gt; /dev/block/mmcblk0p2
lrwxrwxrwx root     root    2013-01-21 08:50 misc             -&gt; /dev/block/mmcblk0p3
lrwxrwxrwx root     root    2013-01-21 08:50 resource         -&gt; /dev/block/mmcblk0p4
lrwxrwxrwx root     root    2013-01-21 08:50 kernel           -&gt; /dev/block/mmcblk0p5
lrwxrwxrwx root     root    2013-01-21 08:50 boot             -&gt; /dev/block/mmcblk0p6
lrwxrwxrwx root     root    2013-01-21 08:50 recovery         -&gt; /dev/block/mmcblk0p7
lrwxrwxrwx root     root    2013-01-21 08:50 backup           -&gt; /dev/block/mmcblk0p8
lrwxrwxrwx root     root    2013-01-21 08:50 cache            -&gt; /dev/block/mmcblk0p9
lrwxrwxrwx root     root    2013-01-21 08:50 kpanic           -&gt; /dev/block/mmcblk0p10
lrwxrwxrwx root     root    2013-01-21 08:50 system           -&gt; /dev/block/mmcblk0p11
lrwxrwxrwx root     root    2013-01-21 08:50 metadata         -&gt; /dev/block/mmcblk0p12
lrwxrwxrwx root     root    2013-01-21 08:50 baseparamer      -&gt; /dev/block/mmcblk0p13
lrwxrwxrwx root     root    2013-01-21 08:50 userdata         -&gt; /dev/block/mmcblk0p14
lrwxrwxrwx root     root    2013-01-21 08:50 radical_update   -&gt; /dev/block/mmcblk0p15
lrwxrwxrwx root     root    2013-01-21 08:50 user             -&gt; /dev/block/mmcblk0p16
</code></pre><h2 id="RK平台各分区介绍"><a href="#RK平台各分区介绍" class="headerlink" title="RK平台各分区介绍"></a>RK平台各分区介绍</h2><pre><code>uboot.img
trust.img
misc.img      RK平台，misc分区内容用于启动模式切换，是升级基带还是进入Recovery（misc分区的内容可以被按键出发改变???）
resource.img  RK平台资源映像，内含开机图片和内核的设备树信息。
kernel
boot.img      Android 的初始文件映像，负责初始化并加载 system 分区，一般Android系统这个镜像中包含ramdisk.img根文件系统+kernel（RK平台的boot.img是没包含kernel部分的）
    ramdisk.img   是根文件系统，是root目录打包成的镜像（ramdisk-recovery.img）
recovery.img  恢复模式系统启动镜像。内容和boot.img雷同（RK平台recovery.img包含kernel部分），但是其中的ramdisk.img（ramdisk-recovery.img）有些许不同：
              recovery.fstab文件、sbin下部分工具、build.prop、init.bootmode.emmc.rc、sepolicy等
backup
cache
kpanic

system.img    包括了主要的包、库等文件
metadata
baseparameter
userdata.img  包括了一些用户数据
radical_update
user
</code></pre><h2 id="另："><a href="#另：" class="headerlink" title="另："></a>另：</h2><pre><code>RK平台生成boot.img recovery.img system.img userdata.img是使用自己的mkimage.sh工具讲root system data 目录生成的
再使用工具mkupdate.sh生成update.img的（不带userdata.img）
烧写userdata.img 需要使用./upgrade_tool DI userdata userdata.img 单独烧写
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RK/">RK</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分区/">分区</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-RK平台Android分区大小修改说明"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/11/RK平台Android分区大小修改说明/">RK平台Android分区大小修改说明</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/11/RK平台Android分区大小修改说明/" class="article-date">
	  <time datetime="2017-04-11T01:01:57.000Z" itemprop="datePublished">2017-04-11</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>不同于一般的Android系统（一般Android系统分区信息在BoardConfig.mk BoardConfigCommon.mk中），RK平台的分区信息文件在自带的烧录工具包中的parameter文件中</p>
<h6 id="如下是板子的parameter文件"><a href="#如下是板子的parameter文件" class="headerlink" title="如下是板子的parameter文件:"></a>如下是板子的parameter文件:</h6><pre><code>FIRMWARE_VER: 5.1.0
MACHINE_MODEL: Geekbox
MACHINE_ID: 007
MANUFACTURER: RK3368
MAGIC: 0x5041524B
ATAG: 0x00200800
MACHINE: 3368
CHECK_MASK: 0x80
PWR_HLD: 0,0,A,0,1
#KERNEL_IMG: 0x00280000
#FDT_NAME: rk-kernel.dtb
#RECOVER_KEY: 1,1,0,20,0
#in section; per section 512(0x200) bytes
CMDLINE: console=ttyS2 androidboot.baseband=N/A androidboot.selinux=permissive androidboot.hardware=rk30board androidboot.console=ttyS2 init=/init mtdparts=rk29xxnand:0x00002000@0x00002000(uboot),0x00002000@0x00004000(trust),0x00002000@0x00006000(misc),0x00008000@0x00008000(resource),0x00008000@0x00010000(kernel),0x00010000@0x00018000(boot),0x00010000@0x00028000(recovery),0x00038000@0x00038000(backup),0x00040000@0x00070000(cache),0x00002000@0x000B0000(kpanic),0x00200000@0x000B2000(system),0x00008000@0x002B2000(metadata),0x00002000@0x002BA000(baseparamer),0x00400000@0x002BC000(userdata),0x00020000@0x006BC000(radical_update),-@0x006DC000(user)
</code></pre><p>分区信息在mtdparts=rk29xxnand:字段后面部分，所以我们修改这部分内容就可以了</p>
<h6 id="这部分信息格式介绍-如："><a href="#这部分信息格式介绍-如：" class="headerlink" title="这部分信息格式介绍 如："></a>这部分信息格式介绍 如：</h6><pre><code>0x00002000@0x00002000(uboot)  
分区的sector数，每个sector=512Bytes，所以分区大小计算为=0x00002000*512Bytes=4MB
           分区起始地址
                      分区名
</code></pre><p>上述mtdparts=rk29xxnand:字段中所有分区都是连续的，当前分区起始地址+当前分区size和下个分区起始地址都是连续的，所以当修改了其中某个分区后，在它后面的分区的地址都要顺序往前或往后。</p>
<h6 id="以下是我将userdata分区缩小为1GB，将user分区扩大1GB的例子："><a href="#以下是我将userdata分区缩小为1GB，将user分区扩大1GB的例子：" class="headerlink" title="以下是我将userdata分区缩小为1GB，将user分区扩大1GB的例子："></a>以下是我将userdata分区缩小为1GB，将user分区扩大1GB的例子：</h6><pre><code>修改前:
0x00002000@0x00002000(uboot),   //4MB               8MB
0x00002000@0x00004000(trust),   //4MB               12MB
0x00002000@0x00006000(misc),    //4MB               16MB
0x00008000@0x00008000(resource),//16MB              32MB
0x00008000@0x00010000(kernel),  //16MB              48
0x00010000@0x00018000(boot),    //32MB              80
0x00010000@0x00028000(recovery),//32MB              112
0x00038000@0x00038000(backup),  //112MB             224
0x00040000@0x00070000(cache),   //128MB             352
0x00002000@0x000B0000(kpanic),  //4MB               356
0x00200000@0x000B2000(system),  //1024MB            1380
0x00008000@0x002B2000(metadata),//16MB              1396
0x00002000@0x002BA000(baseparamer), //4MB           1400MB
0x00400000@0x002BC000(userdata),    //2048MB        3448
0x00020000@0x006BC000(radical_update), //64MB       3512
         -@0x006DC000(user)            //212        

修改后:
0x00002000@0x00002000(uboot),   //4MB               8MB
0x00002000@0x00004000(trust),   //4MB               12MB
0x00002000@0x00006000(misc),    //4MB               16MB
0x00008000@0x00008000(resource),//16MB              32MB
0x00008000@0x00010000(kernel),  //16MB              48
0x00010000@0x00018000(boot),    //32MB              80
0x00010000@0x00028000(recovery),//32MB              112
0x00038000@0x00038000(backup),  //112MB             224
0x00040000@0x00070000(cache),   //128MB             352
0x00002000@0x000B0000(kpanic),  //4MB               356
0x00200000@0x000B2000(system),  //1024MB            1380
0x00008000@0x002B2000(metadata),//16MB              1396
0x00002000@0x002BA000(baseparamer), //4MB           1400MB
0x00200000@0x002BC000(userdata),    //1024MB        2424MB
0x00020000@0x004BC000(radical_update), //64MB       2488MB
         -@0x004DC000(user)            //1024+212MB = 1236MB   
</code></pre><h5 id="注："><a href="#注：" class="headerlink" title="注："></a>注：</h5><pre><code>1.分区的大小要以4MB对齐！  
2.分区总大小不能超过flash的总长度
</code></pre><h5 id="修改parameter后效果："><a href="#修改parameter后效果：" class="headerlink" title="修改parameter后效果："></a>修改parameter后效果：</h5><pre><code>shell@rk3368_32:/ # df
Filesystem               Size     Used     Free   Blksize
/dev                   495.2M    36.0K   495.2M   4096
/sys/fs/cgroup         495.2M    12.0K   495.2M   4096
/mnt/asec              495.2M     0.0K   495.2M   4096
/mnt/obb               495.2M     0.0K   495.2M   4096
/system               1004.2M   403.0M   601.2M   4096
/cache                 122.0M   140.0K   121.8M   4096
/metadata               11.7M    40.0K    11.7M   4096
/data                  991.9M    87.5M   904.4M   4096
/mnt/shell/emulated    991.9M    87.5M   904.4M   4096
/mnt/internal_sd         1.2G   136.0K     1.2G   8192
/mnt/secure/asec         1.2G   136.0K     1.2G   8192
</code></pre><h3 id="一般Android平台分区修改"><a href="#一般Android平台分区修改" class="headerlink" title="一般Android平台分区修改"></a>一般Android平台分区修改</h3><pre><code>eMMC 分区信息
# cat /proc/partitions                                       
major      minor  #blocks  name
 254        0     520912   zram0
 179        0   15267840   mmcblk0
 179        1       4096   mmcblk0p1
 179        2       4096   mmcblk0p2
 179        3       4096   mmcblk0p3
 179        4      16384   mmcblk0p4
 179        5      16384   mmcblk0p5
 179        6      32768   mmcblk0p6
 179        7      32768   mmcblk0p7
 179        8     114688   mmcblk0p8
 179        9     131072   mmcblk0p9
 179       10       4096   mmcblk0p10
 179       11    1048576   mmcblk0p11
 179       12      16384   mmcblk0p12
 179       13       4096   mmcblk0p13
 179       14    2097152   mmcblk0p14
 179       15      65536   mmcblk0p15
 179       16   11667456   mmcblk0p16
mmcblk0即emmc的容量（单位kb）

#ls /dev/block/platform/ff0f0000.rksdmmc/by-name/* -l 
lrwxrwxrwx root     root    2013-01-21 08:50 uboot            -&gt; /dev/block/mmcblk0p1
lrwxrwxrwx root     root    2013-01-21 08:50 trust            -&gt; /dev/block/mmcblk0p2
lrwxrwxrwx root     root    2013-01-21 08:50 misc             -&gt; /dev/block/mmcblk0p3
lrwxrwxrwx root     root    2013-01-21 08:50 resource         -&gt; /dev/block/mmcblk0p4
lrwxrwxrwx root     root    2013-01-21 08:50 kernel           -&gt; /dev/block/mmcblk0p5
lrwxrwxrwx root     root    2013-01-21 08:50 boot             -&gt; /dev/block/mmcblk0p6
lrwxrwxrwx root     root    2013-01-21 08:50 recovery         -&gt; /dev/block/mmcblk0p7
lrwxrwxrwx root     root    2013-01-21 08:50 backup           -&gt; /dev/block/mmcblk0p8
lrwxrwxrwx root     root    2013-01-21 08:50 cache            -&gt; /dev/block/mmcblk0p9
lrwxrwxrwx root     root    2013-01-21 08:50 kpanic           -&gt; /dev/block/mmcblk0p10
lrwxrwxrwx root     root    2013-01-21 08:50 system           -&gt; /dev/block/mmcblk0p11
lrwxrwxrwx root     root    2013-01-21 08:50 metadata         -&gt; /dev/block/mmcblk0p12
lrwxrwxrwx root     root    2013-01-21 08:50 baseparamer      -&gt; /dev/block/mmcblk0p13
lrwxrwxrwx root     root    2013-01-21 08:50 userdata         -&gt; /dev/block/mmcblk0p14
lrwxrwxrwx root     root    2013-01-21 08:50 radical_update   -&gt; /dev/block/mmcblk0p15
lrwxrwxrwx root     root    2013-01-21 08:50 user             -&gt; /dev/block/mmcblk0p16


即userdata 分区 大小为2097152*1024KB = 2147483648B

BoardConfig.mk 中修改指定变量即可：
BOARD_BOOTIMAGE_PARTITION_SIZE := 16777216
BOARD_RECOVERYIMAGE_PARTITION_SIZE := 16793600
BOARD_SYSTEMIMAGE_PARTITION_SIZE := 2147483648
BOARD_OEMIMAGE_PARTITION_SIZE := 67108864
BOARD_USERDATAIMAGE_PARTITION_SIZE := 25253773312 ---&gt; 2147483648B
BOARD_CACHEIMAGE_PARTITION_SIZE := 268435456
BOARD_CACHEIMAGE_FILE_SYSTEM_TYPE := ext4
BOARD_FLASH_BLOCK_SIZE := 131072
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/RK/">RK</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/分区/">分区</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Hexo入手"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/07/Hexo入手/">Hexo入手</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/07/Hexo入手/" class="article-date">
	  <time datetime="2017-04-07T10:01:57.000Z" itemprop="datePublished">2017-04-07</time>
	</a>

      
    <a class="article-category-link" href="/categories/Hexo/">Hexo</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="1-安装nodejs"><a href="#1-安装nodejs" class="headerlink" title="1. 安装nodejs"></a>1. 安装nodejs</h4><pre><code>从官网下载对应平台binary 包，安装（linux直接将bin lib目录的文件cp到usr/local对应目录下，Window直接点击安装）
</code></pre><h4 id="2-安装hexo"><a href="#2-安装hexo" class="headerlink" title="2. 安装hexo"></a>2. 安装hexo</h4><pre><code>npm install hexo-cli -g
</code></pre><h4 id="3-新建blog"><a href="#3-新建blog" class="headerlink" title="3. 新建blog"></a>3. 新建blog</h4><pre><code>hexo init blog
cd blog
npm install
hexo server
</code></pre><h4 id="3-解决一个warning"><a href="#3-解决一个warning" class="headerlink" title="3. 解决一个warning"></a>3. 解决一个warning</h4><pre><code>npm install -g npm@3.3.12
npm install hexo-deployer-git --save
</code></pre><h4 id="4-配置-config-yml"><a href="#4-配置-config-yml" class="headerlink" title="4. 配置_config.yml"></a>4. 配置_config.yml</h4><pre><code>language: zh-CN
deploy:
  type: git
  repo: &lt;repository url&gt;
  branch: [branch]
  message: [message]
</code></pre><h4 id="5-部署"><a href="#5-部署" class="headerlink" title="5. 部署"></a>5. 部署</h4><pre><code>hexo deploy -generate   //hexo d -g 
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/网页博客/">网页博客</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android_fstab"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/04/07/Android_fstab/">Android fstab介绍</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2017/04/07/Android_fstab/" class="article-date">
	  <time datetime="2017-04-07T08:01:57.000Z" itemprop="datePublished">2017-04-07</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="ubuntu-fstab文件格式"><a href="#ubuntu-fstab文件格式" class="headerlink" title="ubuntu fstab文件格式"></a>ubuntu fstab文件格式</h2><pre><code>下面是/etc/fatab文件的一个示例行：
fs_spec     fs_file fs_type     fs_options  fs_dump    fs_pass
/dev/hda1   /       ext2        defaults    1          1    

fs_spec - 该字段定义希望加载的文件系统所在的设备或远程文件系统，对于一般的本地块设备情况来说：IDE设备一般描述为
          /dev/hdaXN，X是IDE设备通道 (a, b, or c)，N代表分区号；SCSI设备一描述为/dev/sdaXN。对于NFS情况，格式一般为:
         例 如：`knuth.aeb.nl:/&apos;。对于procfs，使用`proc&apos;来定义。
fs_file - 该字段描述希望的文件系统加载的目录点，对于swap设备，该字段为none；对于加载目录名包含空格的情况，用40来
          表示空格。
fs_type - 定义了该设备上的文件系统，一般常见的文件类型为ext2 (linux设备的常用文件类型)、vfat(Windows系统的fat32格
          式)、NTFS、iso9600等。
fs_options - 指定加载该设备的文件系统是需要使用的特定参数选项，多个参数是由逗号分隔开来。对于大多数系统使用&quot;defaults&quot;
             就可以满足需要。其他常见的选项包括：
            选项含义:
            ro      以只读模式加载该文件系统
            sync    不对该设备的写操作进行缓冲处理，这可以防止在非正常关机时情况下破坏文件系统，但是却降低了计算机速度
            user    允许普通用户加载该文件系统
            quota   强制在该文件系统上进行磁盘定额限制
            noauto  不再使用mount －a命令（例如系统启动时）加载该文件系统

fs_dump 该选项被&quot;dump&quot;命令使用来检查一个文件系统应该以多快频率进行转储，若不需要转储就设置该字段为0
fs_pass 该字段被fsck命令用来决定在启动时需要被扫描的文件系统的顺序，根文件系统&quot;/&quot;对应该字段的值应该为1，
                    其他文件系统应该为2。若该文件系统无需在启动时扫描则设置该字段为0
</code></pre><h5 id="ubuntu上实例"><a href="#ubuntu上实例" class="headerlink" title="ubuntu上实例:"></a>ubuntu上实例:</h5><pre><code>&lt;file system&gt;                             &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;      &lt;dump&gt;  &lt;pass&gt;
/ was on /dev/sda1 during installation
UUID=757fbb2f-6ee4-4a05-ad2e-0c16b3edc982 /               ext4    errors=remount-ro 0     1
/home was on /dev/sda6 during installation
UUID=a018cd99-6608-43fc-adea-319a5f04fb29 /home           ext4    defaults        0       2
/opt was on /dev/sda7 during installation
UUID=0351ac71-4e1d-4194-8d7f-4d9e873e5830 /opt            ext4    defaults        0       2
/work was on /dev/sda8 during installation
UUID=3f49c9cc-c9cc-48c5-aa8e-058a1d1ec7ad /work           ext4    defaults        0       2
/work2 was on /dev/sda9 during installation
UUID=e2f54160-fb2d-4517-af54-13393f80ef5f /work2          ext4    defaults        0       2
swap was on /dev/sda5 during installation
UUID=d15cbce2-bff1-4241-9c3c-6811f4a1d67d none            swap    sw              0       0
</code></pre><h2 id="Android-fstab格式及实例"><a href="#Android-fstab格式及实例" class="headerlink" title="Android fstab格式及实例"></a>Android fstab格式及实例</h2><pre><code>https://source.android.com/devices/storage/config.html
&lt;src&gt;                                                 &lt;mnt_point&gt;          &lt;type&gt;    &lt;mnt_flags&gt;     &lt;fs_mgr_flags&gt;
/devices/ff0f0000.rksdmmc/mmc_host/mmc                /mnt/internal_sd     vfat      defaults        voldmanaged=internal_sd:15,noemulatedsd
/dev/block/platform/ff0f0000.rksdmmc/by-name/system   /system              ext4      ro,noatime,nodiratime,noauto_da_alloc     wait,resize,check

src: 设备路径
mnt_point: 挂在点
type: volume中文件系统类型, 对于external cards, type 为vfat
mnt_flags: Vold ignores this field and it should be set to defaults
fs_mgr_flags: Vold ignores any lines in the unified fstab that do not include the voldmanaged= flag in this field. 
           This flag must be followed by a label describing the card, and a partition number or the word auto.
           Here is an example: voldmanaged=sdcard:auto. 
           Other possible flags are nonremovable, encryptable=sdcard, noemulatedsd, and encryptable=userdata.


待续...
</code></pre>
      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fstab/">fstab</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-Android版本-sdk-ndk-对应关系"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/12/12/Android版本-sdk-ndk-对应关系/">Android版本-sdk-ndk-对应关系表</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/12/12/Android版本-sdk-ndk-对应关系/" class="article-date">
	  <time datetime="2016-12-12T04:22:33.000Z" itemprop="datePublished">2016-12-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <table>
<thead>
<tr>
<th style="text-align:left">Code name</th>
<th style="text-align:left">Version</th>
<th style="text-align:left">API level</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Nougat</td>
<td style="text-align:left">7.1</td>
<td style="text-align:left">API level 25</td>
</tr>
<tr>
<td style="text-align:left">Nougat</td>
<td style="text-align:left">7.0</td>
<td style="text-align:left">API level 24</td>
</tr>
<tr>
<td style="text-align:left">Marshmallow</td>
<td style="text-align:left">6.0</td>
<td style="text-align:left">API level 23</td>
</tr>
<tr>
<td style="text-align:left">Lollipop</td>
<td style="text-align:left">5.1</td>
<td style="text-align:left">API level 22</td>
</tr>
<tr>
<td style="text-align:left">Lollipop</td>
<td style="text-align:left">5.0</td>
<td style="text-align:left">API level 21, NDK 10</td>
</tr>
<tr>
<td style="text-align:left">KitKat</td>
<td style="text-align:left">4.4 - 4.4.4</td>
<td style="text-align:left">API level 19</td>
</tr>
<tr>
<td style="text-align:left">Jelly Bean</td>
<td style="text-align:left">4.3.x</td>
<td style="text-align:left">API level 18</td>
</tr>
<tr>
<td style="text-align:left">Jelly Bean</td>
<td style="text-align:left">4.2.x</td>
<td style="text-align:left">API level 17</td>
</tr>
<tr>
<td style="text-align:left">Jelly Bean</td>
<td style="text-align:left">4.1.x</td>
<td style="text-align:left">API level 16</td>
</tr>
<tr>
<td style="text-align:left">Ice Cream Sandwich</td>
<td style="text-align:left">4.0.3 - 4.0.4</td>
<td style="text-align:left">API level 15, NDK 8</td>
</tr>
<tr>
<td style="text-align:left">Ice Cream Sandwich</td>
<td style="text-align:left">4.0.1 - 4.0.2</td>
<td style="text-align:left">API level 14, NDK 7</td>
</tr>
<tr>
<td style="text-align:left">Honeycomb</td>
<td style="text-align:left">3.2.x</td>
<td style="text-align:left">API level 13</td>
</tr>
<tr>
<td style="text-align:left">Honeycomb</td>
<td style="text-align:left">3.1</td>
<td style="text-align:left">API level 12, NDK 6</td>
</tr>
<tr>
<td style="text-align:left">Honeycomb</td>
<td style="text-align:left">3.0</td>
<td style="text-align:left">API level 11</td>
</tr>
<tr>
<td style="text-align:left">Gingerbread</td>
<td style="text-align:left">2.3.3 - 2.3.7</td>
<td style="text-align:left">API level 10</td>
</tr>
<tr>
<td style="text-align:left">Gingerbread</td>
<td style="text-align:left">2.3 - 2.3.2</td>
<td style="text-align:left">API level 9,  NDK 5</td>
</tr>
<tr>
<td style="text-align:left">Froyo</td>
<td style="text-align:left">2.2.x</td>
<td style="text-align:left">API level 8,  NDK 4</td>
</tr>
<tr>
<td style="text-align:left">Eclair</td>
<td style="text-align:left">2.1</td>
<td style="text-align:left">API level 7,  NDK 3</td>
</tr>
<tr>
<td style="text-align:left">Eclair</td>
<td style="text-align:left">2.0.1</td>
<td style="text-align:left">API level 6</td>
</tr>
<tr>
<td style="text-align:left">Eclair</td>
<td style="text-align:left">2.0</td>
<td style="text-align:left">API level 5</td>
</tr>
<tr>
<td style="text-align:left">Donut</td>
<td style="text-align:left">1.6</td>
<td style="text-align:left">API level 4,  NDK 2</td>
</tr>
<tr>
<td style="text-align:left">Cupcake</td>
<td style="text-align:left">1.5</td>
<td style="text-align:left">API level 3,  NDK 1</td>
</tr>
<tr>
<td style="text-align:left">(no code name)</td>
<td style="text-align:left">1.1</td>
<td style="text-align:left">API level 2</td>
</tr>
<tr>
<td style="text-align:left">(no code name)</td>
<td style="text-align:left">1.0</td>
<td style="text-align:left">API level 1</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API-level/">API level</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NDK/">NDK</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SDK/">SDK</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/版本/">版本</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  
    <article id="post-SEAndroid策略规则"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2016/10/12/SEAndroid策略规则/">SEAndroid策略规则</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	<a href="/2016/10/12/SEAndroid策略规则/" class="article-date">
	  <time datetime="2016-10-12T10:22:33.000Z" itemprop="datePublished">2016-10-12</time>
	</a>

      
    <a class="article-category-link" href="/categories/Android/">Android</a>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="SEAndroid中各种实体的SContext-定义"><a href="#SEAndroid中各种实体的SContext-定义" class="headerlink" title="SEAndroid中各种实体的SContext 定义"></a>SEAndroid中各种实体的SContext 定义</h2><p>介绍进程、文件/目录、服务、系统属性等SContext 定义</p>
<h5 id="进程的SContext（以system-server进程为例）（对应每个进程的te文件）"><a href="#进程的SContext（以system-server进程为例）（对应每个进程的te文件）" class="headerlink" title="进程的SContext（以system_server进程为例）（对应每个进程的te文件）"></a>进程的SContext（以system_server进程为例）（对应每个进程的te文件）</h5><pre><code>u:r:system_server:s0           system    494   186   system_server
u表示user SELinux用户
r表示SELinux角色
system_server表示domain，该域的权限定义在策略文件system_server.te中
s0表示MLS中的级别，Android中可忽略
</code></pre><h5 id="file和dir的SContext（以system目录为例）（在file-contexts定义）"><a href="#file和dir的SContext（以system目录为例）（在file-contexts定义）" class="headerlink" title="file和dir的SContext（以system目录为例）（在file_contexts定义）"></a>file和dir的SContext（以system目录为例）（在file_contexts定义）</h5><pre><code>drwxr-xr-x root     root              u:object_r:system_file:s0 system
object_r表示文件对象
system_file表示文件类型
</code></pre><h5 id="fs-use-在fs-use定义"><a href="#fs-use-在fs-use定义" class="headerlink" title="fs_use(在fs_use定义)"></a>fs_use(在fs_use定义)</h5><pre><code>// to do
</code></pre><h5 id="生成-文件系统的-SContext-（在genfs-contexts定义）"><a href="#生成-文件系统的-SContext-（在genfs-contexts定义）" class="headerlink" title="生成 文件系统的 SContext （在genfs_contexts定义）"></a>生成 文件系统的 SContext （在genfs_contexts定义）</h5><pre><code>genfscon rootfs / u:object_r:rootfs:s0
genfscon usbfs  / u:object_r:usbfs:s0
</code></pre><h5 id="property的SContext（在property-contexts定义）"><a href="#property的SContext（在property-contexts定义）" class="headerlink" title="property的SContext（在property_contexts定义）"></a>property的SContext（在property_contexts定义）</h5><pre><code>*                       u:object_r:default_prop:s0    //默认property SContext
hw.                     u:object_r:system_prop:s0
</code></pre><h5 id="service的SContext（在service-contexts定义）"><a href="#service的SContext（在service-contexts定义）" class="headerlink" title="service的SContext（在service_contexts定义）"></a>service的SContext（在service_contexts定义）</h5><pre><code>*                       u:object_r:default_android_service:s0   //默认服务SContext
package                 u:object_r:system_server_service:s0     //package 服务  （在shell中执行service list查看所有服务）
</code></pre><h5 id="APP的SContext-（在mac-permissions-xml-seapp-contexts-xxx定义，详见-APP安全策略）"><a href="#APP的SContext-（在mac-permissions-xml-seapp-contexts-xxx定义，详见-APP安全策略）" class="headerlink" title="APP的SContext （在mac_permissions.xml+seapp_contexts+xxx定义，详见 APP安全策略）"></a>APP的SContext （在mac_permissions.xml+seapp_contexts+xxx定义，详见 APP安全策略）</h5><p>  APP的seinfo: 根据apk的签名决定app的seinfo(platform、default)</p>
<pre><code>1. 特殊APP——system_server (因为它也是有zygote产生的，所以还是也在seapp_contexts中定义)
isSystemServer=true domain=system_server                  // isSystemServer返回true，则domain=system_server
2. 通过user + seinfo + [name]来决定domain 和 type
user=cts seinfo=* name=roidJUnitRunner domain=ctsrunner_app type=app_data_file  // user 是cts，则domain=ctsrunner_app type=app_data_file CTS测试APP
user=system domain=system_app type=system_app_data_file   // user是 system seinfo默认是platform签名，则domain=system_app type=system_app_data_file 系统APP
                                                          // (有android平台签名和system权限)
user=bluetooth domain=bluetooth type=bluetooth_data_file  // bluetooth
user=nfc domain=nfc type=nfc_data_file                    // nfc
user=radio domain=radio type=radio_data_file              // radio
user=shared_relro domain=shared_relro                     // shared_relro
user=shell domain=shell type=shell_data_file              // shell
user=_isolated domain=isolated_app                        // _isolated
user=_app seinfo=platform domain=platform_app type=app_data_file  // 平台APP(有android平台签名，没有system权限)
user=_app domain=untrusted_app type=app_data_file                 // 其他的都是第三方(untrusted_app)APP (没有Android平台签名，没有system权限)
</code></pre><h5 id="APP安全策略"><a href="#APP安全策略" class="headerlink" title="APP安全策略"></a>APP安全策略</h5><p>  APP的SContext 确定了APP domain和type ，下面就是不同类型的app domain的安全策略te文件</p>
<pre><code>app.te 应用给所有APP的安全策略（这里的所有APP指的是所有由zygote产生的进程），appdomain域——APP的基域

system_server.te system_server的安全策略
ctsrunner_app.te CTS APP 的安全策略
system_app.te    系统 APP的安全策略
bluetooth.te     bluetooth APP的安全策略
nfc.te           nfc APP 的安全策略
radio.te         radio APP的安全策略
shared_relro.te  shared_relro APP的安全策略
shell.te         通过shell 启动的APP的安全策略
isolated_app.te  isolated APP的安全策略         AID_ISOLATED_START (99000) ---&gt; AID_ISOLATED_END (99999).
platform_app.te  第三方平台 APP的安全策略
untrusted_app.te 其他的都是第三方 APP的安全策略 APP_AID (10000) ---&gt; AID_ISOLATED_START (99000)
</code></pre><h2 id="安全策略语法"><a href="#安全策略语法" class="headerlink" title="安全策略语法"></a>安全策略语法</h2><p>  上面都将各个实体的SContext 逐一罗列出来了，下面讲下*.te 文件语法    </p>
<h5 id="关键字的关键字-（有点拗口，但确实是这样的）"><a href="#关键字的关键字-（有点拗口，但确实是这样的）" class="headerlink" title="关键字的关键字 （有点拗口，但确实是这样的）"></a>关键字的关键字 （有点拗口，但确实是这样的）</h5><p>  attribute       用于指定xxx_type和domain关键字的关键字<br>  type            用于指定domain域的关键字的关键字<br>  typeattribute   单独将某个type和某个或多个attribute关联起来   </p>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><pre><code>我们再来看看最常见的权限设置语句：
allow netd sysfs:file write;
1）allow：表示授权。除了allow之外，还有allowaudit、dontaudit、neverallow等；       这条语句的语法为：
2）netd：sourcetype，也叫Domain，Subject。
3）sysfs：targettype，它代表其后的file所对应的Type。
4）file：objectclass，它代表能够给Domain操作的对象。例如file、dir、socket等，Android中SecurityClass的定义在security_classes中。在Android系统中，有一些特殊的Class，如property_service，binder等。
5）write：在该类objectclass中所定义的操作，例如file类支持ioctl，read，write等操作。access_vectors中定义了所有objectclass支持的操作。

根据SELinux规范，完整的allow语句格式为：
rule_name source_type target_type:class perm_set;
1）如果有多个source_type，target_type，class或perm_set，可以用&quot;{}&quot;括起来；       注意：使用allow语句的时候，可以使用下面的一些小技巧来简化命令书写；
2）&quot;~&quot;号，表示除了&quot;~&quot;以外；
3）&quot;-&quot;号，表示去除某项内容；
4）&quot;*&quot;号，表示所有内容
</code></pre><h3 id="高级语法"><a href="#高级语法" class="headerlink" title="高级语法"></a>高级语法</h3><p>  对于一般的*.te文件编写，基本的语法就差不多够了，下面是高级语法，说高级语法就是相当于一个批量生成sepolicy规则的的语法，让你少些点规则         </p>
<h5 id="域转换-DomainTransition-简称DT"><a href="#域转换-DomainTransition-简称DT" class="headerlink" title="域转换(DomainTransition,简称DT)"></a>域转换(DomainTransition,简称DT)</h5><p>  SEAndroid中，init进程的SContext为u:r:init:s0（在init.rc中使用” setcon u:r:init:s0”命令设置），而init创建的子进程显然不会也不可能拥有和init进程一样的SContext<br>  （否则根据TE，这些子进程也就在MAC层面上有了和init进程一样的权限）。那么这些子进程是怎么被打上和父进程不一样的SContex呢？<br>  在SELinux中，上述问题被称为DomainTransition，即某个进程的Domain切换到一个更合适的Domain中去。DomainTransition也是在安全策略文件中配置的，而且有相关的关键字。</p>
<pre><code>语法: type\_transition  source\_type  target\_type:class  default\_type
表示source_type域的进程在对target_type类型的文件进行class定义的操作时，进程会切换到default_type域中   

下面我们看个域转换的例子：
type_transition init shell_exec:process init_shell
这个例子表示：当init域的进程执行（process）shell_exec类型的可执行文件时，进程会从init域切换到init_shell域。

那么，哪个文件是shell_exec类型呢？从file_contexts文件能看到，/system/bin/sh的安全属性是u:object_r:shell_exec:s0，
也就是说init域的进程如果运行shell脚本的话，进程所在的域就会切换到init_shell域，这就是DomainTransition（简称DT）。

请注意，DT也是SELinux安全策略的一部分，type_transition不过只是开了一个头而已，要真正实施成功这个DT，还至少需要下面三条权限设置语句：

# 首先，你得让init域的进程要能够执行shell_exec类型的文件
allow init shell_exec:file execute;
# 然后，你需要告诉SELinux，允许init域的进程切换到init_shell域
allow init init_shell:process transition;
# 最后，你还得告诉SELinux，域切换的入口（entrypoint）是执行shell_exec类型的文件
allow init_shell shell_exec:file entrypoint;

看起来挺麻烦，不过SELinux支持宏定义，我们可以定义一个宏，把上面4个步骤全部包含进来。在SEAndroid中，所有的宏都定义在te_macros文件中，其中和DT相关的宏定义如下：
# 定义domain_trans宏，$1,$2,$3代表宏的第一个，第二个…参数
define(`domain_trans&apos;, `
allow $1 $2:file { getattr open read execute };
allow $1 $3:process transition;
allow $3 $2:file { entrypoint open read execute getattr };
… …
&apos;)
# 定义domain_auto_trans宏，这个宏才是我们在te中直接使用的
define(`domain_auto_trans&apos;, `
# Allow the necessary permissions.
domain_trans($1,$2,$3)
# Make the transition occur by default.
type_transition $1 $2:process $3;
&apos;)
呵呵，是不是简单多了，domain_trnas宏在DT需要的最小权限的基础上还增加了一些权限，在te文件中可以直接用domain_auto_trans宏来显示声明域转换，如下：
domain_auto_trans(init, shell_exec, init_shell)
</code></pre><h5 id="类型转换-TypeTransition-简称TT"><a href="#类型转换-TypeTransition-简称TT" class="headerlink" title="类型转换(TypeTransition,简称TT)"></a>类型转换(TypeTransition,简称TT)</h5><p>  除了DT外，还有针对Type的Transition（简称TT）。举个例子，假设目录A的SContext为u:r:dir_a，那么默认情况下，<br>  在该目录下创建的文件的SContext就是u:r:dir_a，如果想让它的SContext发生变化，那么就需要TypeTransition。</p>
<pre><code>和DT类似，TT的关键字也是type_transition，而且要顺利完成Transition，也需要申请相关权限，废话不多说了，
直接看te_macros是怎么定义TT所需的宏：
# 定义file_type_trans宏，为Type Transition申请相关权限
define(`file_type_trans&apos;, `
allow $1 $2:dir ra_dir_perms;
allow $1 $3:notdevfile_class_set create_file_perms;
allow $1 $3:dir create_dir_perms;
&apos;)
# 定义file_type_auto_trans(domain, dir_type, file_type)宏
# 该宏的意思就是当domain域的进程在dir_type类型的目录创建文件时，该文件的SContext
# 应该是file_type类型
define(`file_type_auto_trans&apos;, `
# Allow the necessary permissions.
file_type_trans($1, $2, $3)
# Make the transition occur by default.
type_transition $1 $2:dir $3;
type_transition $1 $2:notdevfile_class_set $3;
&apos;)

栗子： file_type_auto_trans(app_domain, system_data_file, xxx_type)
</code></pre><h3 id="class集合-class"><a href="#class集合-class" class="headerlink" title="class集合 class"></a>class集合 class</h3><pre><code>// to do
</code></pre><h3 id="权限集合-perm-set"><a href="#权限集合-perm-set" class="headerlink" title="权限集合 perm_set"></a>权限集合 perm_set</h3><pre><code>// to do
</code></pre><h2 id="附"><a href="#附" class="headerlink" title="附"></a>附</h2><h3 id="SELinux模式切换命令"><a href="#SELinux模式切换命令" class="headerlink" title="SELinux模式切换命令"></a>SELinux模式切换命令</h3><p>  SELinux支持Disabled，Permissive，Enforce三种模式<br>  Disabled就不用说了，此时SELinux的权限检查机制处于关闭状态；<br>  Permissive模式就是SELinux有效，但是即使你违反了它的安全策略，它让你继续运行，但是会把你违反的内容记录下来。在策略开发的时候非常有用，相当于Debug模式；<br>  Enforce模式就是你违反了安全策略的话，就无法继续操作下去。<br>  在Eng版本使用setenforce命令，可以在Permissive模式和Enforce模式之间切换。</p>
<pre><code>usage:  setenforce [ Enforcing | Permissive | 1 | 0 ]
</code></pre><h3 id="Z——查看SContext-信息的命令"><a href="#Z——查看SContext-信息的命令" class="headerlink" title="-Z——查看SContext 信息的命令"></a>-Z——查看SContext 信息的命令</h3><pre><code>ls -Z   // 文件目录的SContext
ps -Z   // 进程的SContext
</code></pre><h3 id="chcon命令——更改文件的安全属性"><a href="#chcon命令——更改文件的安全属性" class="headerlink" title="chcon命令——更改文件的安全属性"></a>chcon命令——更改文件的安全属性</h3><pre><code>usage:  chcon &lt;SContext&gt; &lt;path&gt;
</code></pre><h3 id="restorecon命令——恢复文件原来的安全属性"><a href="#restorecon命令——恢复文件原来的安全属性" class="headerlink" title="restorecon命令——恢复文件原来的安全属性"></a>restorecon命令——恢复文件原来的安全属性</h3><p>  当文件的安全属性在安全策略配置文件里面有定义时，使用restorecon命令，可以恢复原来的安全属性</p>
<pre><code>usage:  restorecon [-DFnrRv] &lt;path&gt;
</code></pre><h3 id="id-命令——确认自己的SecurityContext"><a href="#id-命令——确认自己的SecurityContext" class="headerlink" title="id 命令——确认自己的SecurityContext"></a>id 命令——确认自己的SecurityContext</h3><pre><code>$ id
uid=2000(shell) gid=2000(shell) groups=1007(log) context=u:r:shell:s0
# id
uid=0(root) gid=0(root) groups=1007(log) context=u:r:su:s0
</code></pre><p>####参考：<br>   <a href="http://blog.csdn.net/modianwutong/article/details/43114883" target="_blank" rel="external">http://blog.csdn.net/modianwutong/article/details/43114883</a></p>

      
    </div>
    <footer class="article-footer">
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/SEAndroid/">SEAndroid</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sepolicy/">sepolicy</a></li></ul>

    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

  


</section>
        
      </div>
      
        <div align="center" style="margin-top: 30px;"><hr class="hr" style="margin:0px; height:3px;"></div>
      
      <footer id="footer">
  

  <div class="container">
      	<div class="row">
	      <p> Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/iTimeTraveler/hexo-theme-hiker" target="_blank">Hexo-theme-hiker</a> </p>
	      <p id="copyRightEn">Copyright &copy; 2012 - 2017 进无止境&#39;s 博客 All Rights Reserved.</p>
	      
	      
    		<p class="busuanzi_uv">
				<span id="busuanzi_container_site_uv"> 访客数 : <span id="busuanzi_value_site_uv"></span></span> |  
				<span id="busuanzi_container_site_pv"> 访问量 : <span id="busuanzi_value_site_pv"></span></span>
		    </p>
  		   
		</div>

		
  </div>
</footer>


<!-- min height -->

<script>
    var wrapdiv = document.getElementById("wrap");
    var contentdiv = document.getElementById("content");
    var allheader = document.getElementById("allheader");

    wrapdiv.style.minHeight = document.body.offsetHeight + "px";
    if (allheader != null) {
      contentdiv.style.minHeight = document.body.offsetHeight - allheader.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    } else {
      contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("footer").offsetHeight + "px";
    }
</script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    


  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



  <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/bootstrap.js"></script>


  <script src="/js/home.js"></script>








  </div>

  <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h2 class="modal-title" id="myModalLabel">设置</h2>
      </div>
      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">


      <div class="modal-body">
          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" onclick="javascript:setFontSize();" aria-expanded="true" aria-controls="collapseOne">
              正文字号大小
            </a>
          </div>
          <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
          <div class="panel-body">
            您已调整页面字体大小
          </div>
        </div>
      


          <div style="margin:6px;">
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" onclick="javascript:setBackground();" aria-expanded="true" aria-controls="collapseTwo">
              夜间护眼模式
            </a>
        </div>
          <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
          <div class="panel-body">
            夜间模式已经开启，再次单击按钮即可关闭 
          </div>
        </div>

        <div>
            <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关 于&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
        </div>
         <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
          <div class="panel-body">
            进无止境&#39;s 博客
          </div>
          <div class="panel-body">
            Copyright © 2017 Jim All Rights Reserved.
          </div>
        </div>
      </div>


      <hr style="margin-top:0px; margin-bottom:0px; width:80%; border-top: 1px solid #000;">
      <hr style="margin-top:2px; margin-bottom:0px; width:80%; border-top: 3px solid #000;">
      <div class="modal-footer">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
      </div>
    </div>
  </div>
</div>
  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
  

	<div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>


</body>
</html>